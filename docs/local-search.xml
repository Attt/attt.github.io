<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Project Loom é¢„è§ˆ</title>
    <link href="/2022/07/14/project-loom-preview/"/>
    <url>/2022/07/14/project-loom-preview/</url>
    
    <content type="html"><![CDATA[<h2 id="ç›¸å…³èµ„æº"><a href="#ç›¸å…³èµ„æº" class="headerlink" title="ç›¸å…³èµ„æº"></a>ç›¸å…³èµ„æº</h2><blockquote><p>ä¸»é¡µï¼š<a href="https://openjdk.org/projects/loom/">https://openjdk.org/projects/loom/</a></p><p>ææ¡ˆï¼š<a href="http://cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html">http://cr.openjdk.java.net/~rpressler&#x2F;loom&#x2F;Loom-Proposal.html</a></p><p>é¢„è§ˆï¼š<a href="https://jdk.java.net/loom/">https://jdk.java.net/loom/</a></p></blockquote><h2 id="EA-in-JDK19"><a href="#EA-in-JDK19" class="headerlink" title="EA in JDK19"></a>EA in JDK19</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">Thread.ofVirtual()<br>            .name(<span class="hljs-string">&quot;fiber-1&quot;</span>)<br>            .allowSetThreadLocals(<span class="hljs-literal">false</span>)<br>            .inheritInheritableThreadLocals(<span class="hljs-literal">false</span>)<br>            .unstarted(() -&gt; &#123;<br>                <span class="hljs-type">Thread</span> <span class="hljs-variable">fiber</span> <span class="hljs-operator">=</span> Thread.currentThread();<br>                System.out.printf(<span class="hljs-string">&quot;[%s,daemon:%s,virtual:%s] - Hello World\n&quot;</span>, fiber.getName(),<br>                        fiber.isDaemon(), fiber.isVirtual());<br>            &#125;).start();<br></code></pre></td></tr></table></figure><h2 id="å‡½æ•°é¢œè‰²é—®é¢˜"><a href="#å‡½æ•°é¢œè‰²é—®é¢˜" class="headerlink" title="å‡½æ•°é¢œè‰²é—®é¢˜"></a>å‡½æ•°é¢œè‰²é—®é¢˜</h2><p><a href="http://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/">what-color-is-your-function</a>ï¼Œå‡è®¾æŸç§è¯­è¨€ä¸­ä¸€ç§å‡½æ•°æ˜¯<font color='red'>çº¢è‰²</font>çš„ï¼Œå¦ä¸€ç§å‡½æ•°æ˜¯<font color='#0099ff'>è“è‰²</font>çš„ï¼š</p><p>é‚£ä¹ˆè¿™ç§è¯­è¨€å®é™…å­˜åœ¨ä¸¤ç§<code>function</code>å…³é”®å­—ï¼š<code>blue_func</code>å’Œ<code>red_func</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">blue_func <span class="hljs-title function_">sync</span>(<span class="hljs-params"></span>)&#123;...&#125;<br><br>red_func <span class="hljs-title function_">async</span>(<span class="hljs-params">callback</span>)&#123;...&#125;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<font color='red'>çº¢è‰²</font>å‡½æ•°çš„ç»“æœä¸é€šè¿‡æ–¹æ³•è¿”å›ï¼Œè€Œæ˜¯ä¼ é€’ç»™å‚æ•°ä¸­çš„å‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼š</p><ul><li>åœ¨<font color='red'>çº¢è‰²</font>å‡½æ•°ä¸­å¯ä»¥è°ƒç”¨<font color='#0099ff'>è“è‰²</font>å‡½æ•°ï¼Œå› ä¸º<font color='#0099ff'>è“è‰²</font>å‡½æ•°çš„è¿”å›å€¼é€šè¿‡æ–¹æ³•è¿”å›èƒ½å¤Ÿæ‹¿åˆ°ã€‚</li><li>è€Œåœ¨<font color='#0099ff'>è“è‰²</font>å‡½æ•°ä¸­æ˜¯ä¸èƒ½è½»æ˜“è°ƒç”¨<font color='red'>çº¢è‰²</font>å‡½æ•°çš„ï¼Œå› ä¸ºç»“æœå·²ç»ä¼ é€’åˆ°<font color='red'>çº¢è‰²</font>å‡½æ•°çš„å‚æ•°å‡½æ•°é‡Œäº†ï¼Œåœ¨<font color='#0099ff'>è“è‰²</font>å‡½æ•°çº¿æ€§æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸èƒ½ä¿è¯èƒ½å¤Ÿä»<font color='red'>çº¢è‰²</font>å‡½æ•°çš„å‚æ•°å‡½æ•°é‡Œè·å–ç»“æœã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">red_func <span class="hljs-title function_">async</span>(<span class="hljs-params">callback</span>)&#123;<br>    <span class="hljs-title function_">sync</span>() <span class="hljs-comment">// å¯ä»¥è°ƒç”¨</span><br>&#125;<br><br>blue_func <span class="hljs-title function_">sync</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-title function_">async</span>(callback) <span class="hljs-comment">// ä¸èƒ½è°ƒç”¨</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰€è°“çš„<font color='red'>çº¢è‰²</font>å‡½æ•°å°±æ˜¯å¼‚æ­¥å‡½æ•°ï¼Œä¸Šé¢çš„è¿™ä¸ªâ€œé¢œè‰²é—®é¢˜â€å°±æ˜¯â€œå›è°ƒåœ°ç‹±â€(â€œcallback hellâ€)çš„å¦ä¸€ç§æ„Ÿå—æ–¹æ³•ğŸ˜…ã€‚</p><p>åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå¼‚æ­¥å­˜åœ¨ä¸¤ä¸ªæ¯”è¾ƒç‚¸è£‚çš„é—®é¢˜ï¼š1. å›è°ƒåœ°ç‹±ğŸ˜…ï¼›2. ä¸€ä¸ªè¢«å¹¿æ³›ä½¿ç”¨çš„åŒæ­¥å‡½æ•°çš„å¼‚æ­¥åŒ–æ‰€éœ€è¦çš„å¤§é‡çš„ä¿®æ”¹å’Œé‡å†™é‡å¯ä»¥è®©ä»»ä½•ä¸€ä¸ªå¼€å‘ç›´æ¥çˆ†ç‚¸ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>asynchronization</tag>
      
      <tag>concurrency</tag>
      
      <tag>virtual threads</tag>
      
      <tag>fiber</tag>
      
      <tag>continuations</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Classç­¾åä¿¡æ¯ä¸åŒ¹é…å¼•èµ·çš„ä¾èµ–å†²çª</title>
    <link href="/2022/07/14/java-security-issue/"/>
    <url>/2022/07/14/java-security-issue/</url>
    
    <content type="html"><![CDATA[<h2 id="ç°è±¡"><a href="#ç°è±¡" class="headerlink" title="ç°è±¡"></a>ç°è±¡</h2><p>çº¿ä¸ŠæŸä¸ªæœåŠ¡å‡çº§zkåˆ°<code>3.4.14</code>, å¼•å…¥ä¾èµ–åæ— æ³•å¯åŠ¨ã€‚</p><p>æŠ¥é”™ä¿¡æ¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">Caused by: java.lang.SecurityException: class <span class="hljs-string">&quot;javax.annotation.ManagedBean&quot;</span><span class="hljs-string">&#x27;s signer information does not match signer information of other classes in the same package</span><br><span class="hljs-string">at java.lang.ClassLoader.checkCerts(ClassLoader.java:891)</span><br><span class="hljs-string">at java.lang.ClassLoader.preDefineClass(ClassLoader.java:661)</span><br><span class="hljs-string">at java.lang.ClassLoader.defineClass(ClassLoader.java:754)</span><br><span class="hljs-string">at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)</span><br><span class="hljs-string">at org.apache.catalina.loader.WebappClassLoaderBase.findClassInternal(WebappClassLoaderBase.java:2408)</span><br><span class="hljs-string">at org.apache.catalina.loader.WebappClassLoaderBase.findClass(WebappClassLoaderBase.java:855)</span><br><span class="hljs-string">at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1327)</span><br><span class="hljs-string">at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1180)</span><br><span class="hljs-string">at java.lang.Class.forName0(Native Method)</span><br><span class="hljs-string">at java.lang.Class.forName(Class.java:348)</span><br></code></pre></td></tr></table></figure><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>åŸå› å¦‚é”™è¯¯ä¿¡æ¯æ‰€è¯´ï¼ŒåŒpackageä¸‹æœ‰ä¸åŒç­¾åä¿¡æ¯ï¼Œå±äºä¾èµ–å†²çªã€‚<code>javax.annotation.ManagedBean</code>çš„packageæ˜¯<code>javax.annotation</code>ï¼Œæ‰¾ä¸€ä¸‹è¿˜æœ‰å“ªä¸ªjaré‡Œé¢æœ‰è¿™ä¸ªpackageï¼š<br><img src="/2022/07/14/java-security-issue/scrshot0.png" alt="æœç´¢å›¾"></p><p>ç„¶åæ‰¾ä¸€ä¸‹è¿™ä¸¤ä¸ªåŒ…æ˜¯ä»€ä¹ˆä¾èµ–å¼•å…¥çš„ï¼ˆæœ‰ä¸€ä¸ªè‚¯å®šæ˜¯zkğŸ˜Š):</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mvn dependency:tree -Dverbose -Dincludes=com.google.code.findbugs,org.eclipse.jetty.orbit<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java">+- org.apache.zookeeper:zookeeper:jar:<span class="hljs-number">3.4</span><span class="hljs-number">.14</span>:compile<br>|  \- com.github.spotbugs:spotbugs-annotations:jar:<span class="hljs-number">3.1</span><span class="hljs-number">.9</span>:compile<br>|     \- com.google.code.findbugs:jsr305:jar:<span class="hljs-number">3.0</span><span class="hljs-number">.2</span>:compile<br>\- com.dangdang:elastic-job-lite-lifecycle:jar:<span class="hljs-number">2.1</span><span class="hljs-number">.5</span>:compile<br>   \- com.dangdang:elastic-job-common-restful:jar:<span class="hljs-number">2.1</span><span class="hljs-number">.5</span>:compile<br>      \- org.eclipse.jetty.aggregate:jetty-all-server:jar:<span class="hljs-number">8.1</span><span class="hljs-number">.19</span>.v20160209:compile<br>         +- org.eclipse.jetty.orbit:javax.servlet:jar:<span class="hljs-number">3.0</span><span class="hljs-number">.0</span>.v201112011016:compile<br>         +- org.eclipse.jetty.orbit:javax.security.auth.message:jar:<span class="hljs-number">1.0</span><span class="hljs-number">.0</span>.v201108011116:compile<br>         +- org.eclipse.jetty.orbit:javax.mail.glassfish:jar:<span class="hljs-number">1.4</span><span class="hljs-number">.1</span>.v201005082020:compile<br>         |  \- (org.eclipse.jetty.orbit:javax.activation:jar:<span class="hljs-number">1.1</span><span class="hljs-number">.0</span>.v201105071233:compile - omitted <span class="hljs-keyword">for</span> duplicate)<br>         +- org.eclipse.jetty.orbit:javax.activation:jar:<span class="hljs-number">1.1</span><span class="hljs-number">.0</span>.v201105071233:compile<br>         \- org.eclipse.jetty.orbit:javax.annotation:jar:<span class="hljs-number">1.1</span><span class="hljs-number">.0</span>.v201108011116:compile<br></code></pre></td></tr></table></figure><p>æ’æ‰ä»»æ„ä¸€ä¸ªå°±OKäº†ï¼Œå¤§æ¦‚ç‡æ˜¯jettyåšäº†ç­¾åï¼Œæ¯•ç«Ÿæ˜¯ä¸ªserverï¼ˆå¯æ‰§è¡Œä»£ç ï¼‰ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><blockquote><p><a href="https://stackoverflow.com/questions/2877262/java-securityexception-signer-information-does-not-match">Java SecurityException: signer information does not match</a></p></blockquote><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">This happens when classes belonging to the same package are loaded from different JAR files, and those JAR files have signatures signed with different certificates - or, perhaps more often, at least one is signed and one or more others are not (which includes classes loaded from directories since those AFAIK cannot be signed).<br><br>So either make sure all JARs (or at least those which contain classes from the same packages) are signed using the same certificate, or remove the signatures from the manifest of JAR files with overlapping packages.<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>maven</tag>
      
      <tag>dependencies confliction</tag>
      
      <tag>class load</tag>
      
      <tag>class security check</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¼‚æ­¥/å¹¶å‘</title>
    <link href="/2022/07/10/asynchronization/"/>
    <url>/2022/07/10/asynchronization/</url>
    
    <content type="html"><![CDATA[<h2 id="Future"><a href="#Future" class="headerlink" title="Future"></a>Future</h2><p>åŸºæœ¬çš„å¼‚æ­¥æ¨¡å‹ï¼Œä¸»è¦æ–¹æ³•æœ‰<code>get()</code>ã€<code>get(time,timeUnit)</code>ã€<code>isDone()</code>ç­‰ã€‚</p><h2 id="CompletableFuture"><a href="#CompletableFuture" class="headerlink" title="CompletableFuture"></a>CompletableFuture</h2><p>æ”¯æŒå›è°ƒï¼Œæ›´å¥½çš„æ”¯æŒå¤šä¸ªå¼‚æ­¥ä»»åŠ¡çš„æµç¨‹æ§åˆ¶ï¼Œæ¯”å¦‚å…ˆåé¡ºåºï¼ŒæˆåŠŸæˆ–å¤±è´¥ä¹‹åçš„æµè½¬ã€‚</p><h3 id="å‡å¦‚æœ‰Aã€Bä¸¤ä¸ªä»»åŠ¡ï¼ŒBéœ€è¦åœ¨Aä¹‹åæ‰§è¡Œï¼š"><a href="#å‡å¦‚æœ‰Aã€Bä¸¤ä¸ªä»»åŠ¡ï¼ŒBéœ€è¦åœ¨Aä¹‹åæ‰§è¡Œï¼š" class="headerlink" title="å‡å¦‚æœ‰Aã€Bä¸¤ä¸ªä»»åŠ¡ï¼ŒBéœ€è¦åœ¨Aä¹‹åæ‰§è¡Œï¼š"></a>å‡å¦‚æœ‰Aã€Bä¸¤ä¸ªä»»åŠ¡ï¼ŒBéœ€è¦åœ¨Aä¹‹åæ‰§è¡Œï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java">CompletableFuture&lt;String&gt; aQuery = CompletableFuture.supplyAsync(() -&gt; &#123;<br>    <span class="hljs-keyword">return</span> queryA();<br>&#125;).exceptionally(e -&gt; &#123;<br>    System.out.println(<span class="hljs-string">&quot;failed to execute aQuery&quot;</span>);<br>    e.printStackTrace();<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;);<br><span class="hljs-comment">//aQueryæˆåŠŸåç»§ç»­æ‰§è¡ŒbQuery</span><br>CompletableFuture&lt;Double&gt; bQuery = cfQuery.thenApplyAsync(aResult -&gt; &#123;<br>    <span class="hljs-keyword">if</span>(aResult == <span class="hljs-literal">null</span>)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> queryB(aResult);<br>&#125;).exceptionally(e -&gt; &#123;<br>    System.out.println(<span class="hljs-string">&quot;failed to execute bQuery&quot;</span>);<br>    e.printStackTrace();<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;);<br><span class="hljs-comment">// bQueryæˆåŠŸåæ‰“å°ç»“æœ</span><br>bQuery.thenAccept(System.out::println);<br></code></pre></td></tr></table></figure><p>å¦‚æœä¸ä¾èµ–CompletableFutureçš„è¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java">Future&lt;String&gt; aFuture = asyncQueryA();<br><span class="hljs-type">String</span> <span class="hljs-variable">aResult</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">try</span>&#123;<br>    aResult = aFuture.get();<br>&#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;<br>    System.out.println(<span class="hljs-string">&quot;failed to execute asyncQueryA&quot;</span>);<br>    e.printStackTrace();<br>&#125;<br><br><span class="hljs-type">String</span> <span class="hljs-variable">bResult</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">if</span>(aResult != <span class="hljs-literal">null</span>)&#123;<br>    Future&lt;String&gt; bFuture = asyncQueryB(aResult);<br>    <span class="hljs-keyword">try</span>&#123;<br>        bResult = bFuture.get();<br>    &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;<br>        System.out.println(<span class="hljs-string">&quot;failed to execute asyncQueryB&quot;</span>);<br>        e.printStackTrace();<br>    &#125;<br>&#125;<br>System.out.println(bResult);<br></code></pre></td></tr></table></figure><h3 id="å‡å¦‚æœ‰Aã€Bä¸¤ä¸ªä»»åŠ¡ï¼ŒAæˆ–Bä»»æ„ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆå°±ç»“æŸï¼š"><a href="#å‡å¦‚æœ‰Aã€Bä¸¤ä¸ªä»»åŠ¡ï¼ŒAæˆ–Bä»»æ„ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆå°±ç»“æŸï¼š" class="headerlink" title="å‡å¦‚æœ‰Aã€Bä¸¤ä¸ªä»»åŠ¡ï¼ŒAæˆ–Bä»»æ„ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆå°±ç»“æŸï¼š"></a>å‡å¦‚æœ‰Aã€Bä¸¤ä¸ªä»»åŠ¡ï¼ŒAæˆ–Bä»»æ„ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆå°±ç»“æŸï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//aQuery</span><br>CompletableFuture&lt;String&gt; aQuery = CompletableFuture.supplyAsync(() -&gt; &#123;<br>    <span class="hljs-keyword">return</span> queryA();<br>&#125;).exceptionally(e -&gt; &#123;<br>    System.out.println(<span class="hljs-string">&quot;failed to execute aQuery&quot;</span>);<br>    e.printStackTrace();<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;);<br><span class="hljs-comment">//bQuery</span><br>CompletableFuture&lt;Double&gt; bQuery = cfQuery.thenApplyAsync(() -&gt; &#123;<br>    <span class="hljs-keyword">return</span> queryB();<br>&#125;).exceptionally(e -&gt; &#123;<br>    System.out.println(<span class="hljs-string">&quot;failed to execute bQuery&quot;</span>);<br>    e.printStackTrace();<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;);<br><br>CompletableFuture&lt;Object&gt; aOrBQuery = CompletableFuture.anyOf(aQuery, bQuery);<br><br><span class="hljs-comment">// ä»»æ„ä¸€ä¸ªä»»åŠ¡æˆåŠŸåæ‰“å°ç»“æœ</span><br>aOrBQuery.thenAccept(System.out::println);<br></code></pre></td></tr></table></figure><p>è¿™ç§æƒ…å†µå¦‚æœä¸ä¾èµ–CompletableFutureçš„è¯â€¦â€¦ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java">Future&lt;String&gt; aFuture = asyncQueryA();<br>Future&lt;String&gt; bFuture = asyncQueryB();<br><span class="hljs-type">int</span> <span class="hljs-variable">failedTask</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>    <span class="hljs-keyword">if</span>(aFuture.isDone())&#123;<br>        <span class="hljs-keyword">try</span>&#123;<br>            result = aFuture.get();<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;<br>            System.out.println(<span class="hljs-string">&quot;failed to execute asyncQueryA&quot;</span>);<br>            e.printStackTrace();<br>            failedTask++;<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(bFuture.isDone())&#123;<br>        <span class="hljs-keyword">try</span>&#123;<br>            result = bFuture.get();<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;<br>            System.out.println(<span class="hljs-string">&quot;failed to execute asyncQueryB&quot;</span>);<br>            e.printStackTrace();<br>            failedTask++;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// ä¸å†™==2, é˜²æ­¢ä»¥ååŠ ä»»åŠ¡cdefç­‰ç­‰æ—¶å¿˜è®°ä¿®æ”¹è¿™ä¸ªåˆ¤æ–­å€¼å¼•èµ·æ­»å¾ªç¯</span><br>    <span class="hljs-keyword">if</span>(failedTask &gt; <span class="hljs-number">1</span>) <span class="hljs-keyword">break</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å®ç°ç»†èŠ‚å’Œæ³¨æ„ç‚¹"><a href="#å®ç°ç»†èŠ‚å’Œæ³¨æ„ç‚¹" class="headerlink" title="å®ç°ç»†èŠ‚å’Œæ³¨æ„ç‚¹"></a>å®ç°ç»†èŠ‚å’Œæ³¨æ„ç‚¹</h3><ol><li><code>thenAccept</code>æˆ–è€…<code>exceptionally</code>è¿™ç§æ–¹æ³•æ˜¯åœ¨è°ƒç”¨çº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œä¼šé˜»å¡è°ƒç”¨çº¿ç¨‹ï¼Œ<code>supplyAsync</code>æˆ–è€…<code>thenApplyAsync</code>è¿™ç§åå­—é‡Œå¸¦Asyncçš„ä¼šè¢«æäº¤åˆ°çº¿ç¨‹æ± æ‰§è¡Œã€‚</li><li>å¦‚æœä¸æŒ‡å®šçº¿ç¨‹æ± çš„è¯ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯<code>ForkJoinPool</code>çš„<code>CommonPool</code>çº¿ç¨‹æ± ï¼ˆé»˜è®¤çš„coreSizeå’ŒpoolSizeæ˜¯8è¿˜æ˜¯å‡ æ¥ç€ï¼Œåæ­£å¾ˆå°‘ï¼‰ï¼Œå¯èƒ½ä¼šå’Œå…¶ä»–çš„ä»»åŠ¡å…±äº«çº¿ç¨‹æ± ï¼Œä¹Ÿè®¸ä¼šäº’ç›¸æŠ¢å çº¿ç¨‹èµ„æºã€‚</li><li><code>CompletionStage</code>å®šä¹‰æµç¨‹æ§åˆ¶çš„èƒ½åŠ›ï¼Œå„ç§æµç¨‹ç»„åˆçš„å®é™…åŠ¨ä½œéƒ½åŸºäº<code>CompletableFuture.Completion</code>å®ç°çš„ç±»</li></ol><h2 id="RxJava"><a href="#RxJava" class="headerlink" title="RxJava"></a>RxJava</h2><p>ï¼ˆå¾…ç»­ï¼‰</p><h2 id="Fiber-x2F-Coroutines"><a href="#Fiber-x2F-Coroutines" class="headerlink" title="Fiber&#x2F;Coroutines"></a>Fiber&#x2F;Coroutines</h2><p><a href="/2022/07/14/project-loom-preview/index.html">Project Loom Preview</a></p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>asynchronization</tag>
      
      <tag>concurrency</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€Œã«ã€ã¨ã€Œã§ã€ä½œä¸ºåœºæ‰€åŠ©è¯æ—¶çš„åŒºåˆ«</title>
    <link href="/2022/06/29/jp-ni-de-basyou/"/>
    <url>/2022/06/29/jp-ni-de-basyou/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¾‹å¥"><a href="#ä¾‹å¥" class="headerlink" title="ä¾‹å¥"></a>ä¾‹å¥</h1><ol><li>ä»Šæ—¥ã¯ãšã£ã¨å®¶<code>ã«</code>ã„ã¾ã™ã€‚</li><li>æ˜æ—¥ã¯ãšã£ã¨å®¶<code>ã§</code>ã‚²ãƒ¼ãƒ ã‚’ã—ã¾ã™ã€‚</li><li>ã‚ãã“<code>ã«</code>å±±ãŒè¦‹ãˆã¾ã™ã€‚ï¼ˆã‚ãã“<code>ã‹ã‚‰</code>å±±ãŒè¦‹ãˆã¾ã™ã€‚ï¼‰</li><li>å‹é”ã®å®¶<code>ã«</code>æºå¸¯ã‚’å¿˜ã‚Œã¾ã—ãŸã€‚</li><li>å‹é”ã®å®¶<code>ã§</code>æºå¸¯ã‚’ç„¡ãã—ã¾ã—ãŸã€‚</li><li>ã“ã“<code>ã«</code>è»Šã‚’åœã‚ã¦ãã ã•ã„ã€‚ãƒ»ã“ã“<code>ã§</code>è»Šã‚’åœã‚ã§ãã ã•ã„ã€‚</li></ol><h1 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h1><p><code>ã«</code>ä½œä¸ºåœºæ‰€&#x2F;åœ°ç‚¹åŠ©è¯çš„æ—¶å€™ï¼Œè¡¨è¾¾çš„æ˜¯ä¸€ç§é™æ€çš„ç»“æœæˆ–è€…ä¸€ç§çŠ¶æ€ï¼Œ<code>ã§</code>åˆ™è¡¨è¾¾ä¸€ä¸ªåŠ¨ä½œæˆ–è€…ä¸€ä¸ªè¡Œä¸ºã€‚</p><blockquote><p>ä»Šæ—¥ã¯ãšã£ã¨å®¶<code>ã«</code>ã„ã¾ã™ã€‚</p></blockquote><p>è¡¨è¾¾â€œå­˜åœ¨â€æ˜¯ä¸€ç§çŠ¶æ€ã€‚</p><blockquote><p>æ˜æ—¥ã¯ãšã£ã¨å®¶<code>ã§</code>ã‚²ãƒ¼ãƒ ã‚’ã—ã¾ã™ã€‚</p></blockquote><p>è¡¨è¾¾â€œæ‰“æ¸¸æˆâ€æ˜¯ä¸€ä¸ªåŠ¨ä½œã€‚</p><blockquote><p>ã‚ãã“<code>ã«</code>å±±ãŒè¦‹ãˆã¾ã™ã€‚</p></blockquote><p>è¡¨è¾¾çš„â€œèƒ½è¢«çœ‹è§â€æ˜¯ä¸€ä¸ªçŠ¶æ€ã€‚</p><blockquote><p>å‹é”ã®å®¶<code>ã«</code>æºå¸¯ã‚’å¿˜ã‚Œã¾ã—ãŸã€‚</p></blockquote><p>è¡¨è¾¾â€œè½åœ¨æŸå¤„â€æ˜¯ä¸€ä¸ªäº‹å®&#x2F;çŠ¶æ€ã€‚</p><blockquote><p>å‹é”ã®å®¶<code>ã§</code>æºå¸¯ã‚’ç„¡ãã—ã¾ã—ãŸã€‚</p></blockquote><p>è¡¨è¾¾â€œå¼„ä¸¢â€æ˜¯ä¸€ä¸ªåŠ¨ä½œã€‚</p><p><code>ä»â€œå¼„ä¸¢äº†â€è¿™ä¸ªåŠ¨ä½œå‘ç”Ÿå¼€å§‹ï¼Œå°±ä¸€ç›´å¤„äºâ€å¿˜äº†â€œçš„çŠ¶æ€ã€‚</code></p><blockquote><p>ã“ã“<code>ã«</code>è»Šã‚’åœã‚ã¦ãã ã•ã„ã€‚</p></blockquote><p>æŠŠè½¦åœåœ¨è¿™é‡Œï¼Œè¡¨è¾¾çš„æ˜¯åœ¨è¿™é‡Œä¿æŒä¸€ç§åœç€çš„çŠ¶æ€ã€‚</p><blockquote><p>ã“ã“<code>ã§</code>è»Šã‚’åœã‚ã§ãã ã•ã„ã€‚</p></blockquote><p>åœ¨è¿™é‡Œåœè½¦ï¼Œè¡¨è¾¾çš„æ˜¯â€œåœâ€è¿™ä¸ªåŠ¨ä½œï¼Œè‡³äºâ€œåœâ€å®Œäº†æ˜¯ä¿æŒâ€œåœâ€çš„çŠ¶æ€è¿˜æ˜¯ç»§ç»­å‘ç”Ÿâ€œåŠ¨â€çš„åç»­åŠ¨ä½œå¹¶ä¸æ˜¯é‡ç‚¹ã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">å†æ¯”å¦‚è¯´ï¼šå¯ã‚‹ï¼Œæœ‰ä¸¤ä¸ªæ„æ€ï¼Œä¸€ä¸ªæ˜¯â€œç¡è§‰ã€€çœ ã‚‹â€ï¼Œä¸€ä¸ªæ˜¯â€œèººç€ æ¨ªãŸã‚ã‚‹ãƒ»æ¨ªã«ãªã‚‹â€<br><br>ã€Œã“ã“ã§å¯ã‚‹ã€è¡¨ç¤ºçš„æ˜¯åœ¨è¿™é‡Œç¡è§‰ï¼Œå› ä¸ºç¡è§‰æ˜¯ä¸ªåŠ¨ä½œï¼Œè‡³äºä½ è¿™ä¸ªåŠ¨ä½œåšäº†ä¼šæ€ä¹ˆæ ·é‚£ä¸é‡è¦ï¼Œå°±åœ¨è¿™é‡Œç¡å°±å®Œäº‹äº†ã€‚<br><br>ã€Œã“ã“ã«å¯ã‚‹ã€è¡¨ç¤ºåœ¨è¿™é‡Œèººç€ï¼Œæ€ä¹ˆèººç€çš„ä¸é‡è¦ï¼Œå€’ä¸‹å»è¿˜æ˜¯æ…¢æ…¢èººä¸‹å»æˆ–è€…åç©ºç¿»æ¥è½¬ä½“ä¸‰å‘¨åŠæ‘”åœ¨ä¸Šé¢éƒ½ä¸é‡è¦ï¼Œæœ€ç»ˆå˜æˆèººç€å°±å¯ä»¥ï¼Œåªè¦æœ€åæ˜¯åœ¨ã“ã“èººç€çš„çŠ¶æ€éƒ½OKã€‚<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Lanaguage</category>
      
    </categories>
    
    
    <tags>
      
      <tag>language</tag>
      
      <tag>japanese</tag>
      
      <tag>æ–‡æ³•</tag>
      
      <tag>grammar</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ–‡æ³•ã€Œã¨ã“ã‚ã€</title>
    <link href="/2022/06/23/jp-tokoro/"/>
    <url>/2022/06/23/jp-tokoro/</url>
    
    <content type="html"><![CDATA[<h1 id="N4"><a href="#N4" class="headerlink" title="N4"></a>N4</h1><h2 id="åŸå‹æˆ–ã¯æ„å¿—å‹ãƒ»ã¦ã„ã‚‹ãƒ»ãŸ-ï¼‹-ã¨ã“ã‚ã "><a href="#åŸå‹æˆ–ã¯æ„å¿—å‹ãƒ»ã¦ã„ã‚‹ãƒ»ãŸ-ï¼‹-ã¨ã“ã‚ã " class="headerlink" title="åŸå‹æˆ–ã¯æ„å¿—å‹ãƒ»ã¦ã„ã‚‹ãƒ»ãŸã€€ï¼‹ã€€ã¨ã“ã‚ã "></a>åŸå‹æˆ–ã¯æ„å¿—å‹ãƒ»ã¦ã„ã‚‹ãƒ»ãŸã€€ï¼‹ã€€ã¨ã“ã‚ã </h2><p>å‹•ä½œã‚’ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¡¨ã™è¡¨ç¾ã§ã™ã€‚</p><blockquote><p>ä»Šã¯å¯ã‚‹ã¨ã“ã‚ã ã€‚<br>ã•ã£ãã¯å¯ã¦ã„ã‚‹ã¨ã“ã‚ã ã€‚</p></blockquote><h2 id="ã®ã¨ã“ã‚"><a href="#ã®ã¨ã“ã‚" class="headerlink" title="ã®ã¨ã“ã‚"></a>ã®ã¨ã“ã‚</h2><p>ä»Šã®çŠ¶æ³ã‚’è¡¨ã™è¡¨ç¾ã§ã™ã€‚</p><blockquote><p>ä»Šã®ã¨ã“ã‚ã€å¯ã‚‹ã“ã¨ã¯ã§ããªã„ã€‚</p></blockquote><h1 id="N2"><a href="#N2" class="headerlink" title="N2"></a>N2</h1><h2 id="ãŸã¨ã“ã‚ï¼ˆãŒï¼‰"><a href="#ãŸã¨ã“ã‚ï¼ˆãŒï¼‰" class="headerlink" title="ãŸã¨ã“ã‚ï¼ˆãŒï¼‰"></a>ãŸã¨ã“ã‚ï¼ˆãŒï¼‰</h2><p>é€†æ¥ã‚’è¡¨ã™è¡¨ç¾ã§ã™ã€‚</p><blockquote><p>ç¾Šã‚’æ•°ãˆãŸã¨ã“ã‚ãŒã€çœ ã‚Œãªã£ã‹ãŸã€‚</p></blockquote><h2 id="ãŸã¨ã“ã‚"><a href="#ãŸã¨ã“ã‚" class="headerlink" title="ãŸã¨ã“ã‚"></a>ãŸã¨ã“ã‚</h2><p>BçµæœãŒã©ã†ãªã‚‹ã‹ã©ã†ã‹åˆ†ã‹ã‚‰ãšãƒ»Bçµæœã‚’æœŸå¾…ã›ãšã«Aè¡Œå‹•ã‚’è¡Œã£ãŸã€‚<br>Aè¡Œå‹•ã¯Bçµæœã®ãã£ã‹ã‘ã ã€‚</p><blockquote><p>å˜ã«ãƒ™ãƒƒãƒ‰ã«ç€ã„ãŸã¨ã“ã‚ã€ã¡ã‚ƒã‚“ã¨å¯ã‚‹å§‹ã‚ãŸã€‚</p></blockquote><h2 id="ã¨ã“ã‚ã‚’"><a href="#ã¨ã“ã‚ã‚’" class="headerlink" title="ã¨ã“ã‚ã‚’"></a>ã¨ã“ã‚ã‚’</h2><p>Aå‹•ä½œã‚’ã™ã‚‹æ™‚ã«ã€BãŒç™ºç”Ÿã—ãŸãƒ»ã—ã¦ã„ãŸã€‚</p><blockquote><p>å¯ã¦ã„ã‚‹ã¨ã“ã‚ã‚’é¨’éŸ³ã«èµ·ã“ã—ãŸã€‚</p></blockquote><h2 id="ã¨ã“ã‚ã ã£ãŸãƒ»ã§ã—ãŸ"><a href="#ã¨ã“ã‚ã ã£ãŸãƒ»ã§ã—ãŸ" class="headerlink" title="ã¨ã“ã‚ã ã£ãŸãƒ»ã§ã—ãŸ"></a>ã¨ã“ã‚ã ã£ãŸãƒ»ã§ã—ãŸ</h2><p>Aæ¡ä»¶ãŒç•°ãªã‚Œã°ã€Bçµæœã«ãªã‚‹ã€‚<br>Bäº‹é …ãŒç™ºç”Ÿã™ã‚‹å‰ã«Aæ¡ä»¶ã§å›é¿ã—ãŸã“ã¨ãŒã§ããŸã€‚<br>Aæ¡ä»¶ã§ã€å±ã†ãBçµæœã«ãªã£ãŸã€‚</p><blockquote><p>å¯ä¸è¶³ã®ã›ã„ã§ã€ã•ã£ãæ­©ãæ™‚å¯ã‚‹ã¨ã“ã‚ã ã£ãŸã€‚</p></blockquote><h2 id="ã¨ã“ã‚ã‚’è¦‹ã‚‹ã¨"><a href="#ã¨ã“ã‚ã‚’è¦‹ã‚‹ã¨" class="headerlink" title="ã¨ã“ã‚ã‚’è¦‹ã‚‹ã¨"></a>ã¨ã“ã‚ã‚’è¦‹ã‚‹ã¨</h2><p>AçŠ¶æ³ã‹ã‚‰ã€BçŠ¶æ³ã‚’æ¨æ¸¬ã™ã‚‹è¡¨ç¾ã§ã™ã€‚</p><blockquote><p>ç¼ãŒã™ã”ãé‡ãè¦‹ãˆã‚‹ã¨ã“ã‚ã‚’è¦‹ã‚‹ã¨ã€ã•ãæ˜¨æ—¥ã®å¤œã¯å¤œæ›´ã‹ã—ã‚’ã—ãŸãªã€‚</p></blockquote><h2 id="ã¨ã“ã‚ã¾ã§"><a href="#ã¨ã“ã‚ã¾ã§" class="headerlink" title="ã¨ã“ã‚ã¾ã§"></a>ã¨ã“ã‚ã¾ã§</h2><p>å‹•ä½œã¯åˆ°é”ã§ãã‚‹é™ç•Œç‚¹ã‚’è¡¨ã™è¡¨ç¾ã§ã™ã€‚</p><blockquote><p>å‡ºæ¥ã‚‹ã¨ã“ã‚ã¾ã§å¯ã¦ãã ã•ã„ã€‚</p></blockquote><h2 id="ã¦ã„ãŸã¨ã“ã‚ã ãƒ»ã€œã¨ã“ã‚ã«ã€œãƒ»ã€œã¨ã“ã‚ã¸ã€œ"><a href="#ã¦ã„ãŸã¨ã“ã‚ã ãƒ»ã€œã¨ã“ã‚ã«ã€œãƒ»ã€œã¨ã“ã‚ã¸ã€œ" class="headerlink" title="ã¦ã„ãŸã¨ã“ã‚ã ãƒ»ã€œã¨ã“ã‚ã«ã€œãƒ»ã€œã¨ã“ã‚ã¸ã€œ"></a>ã¦ã„ãŸã¨ã“ã‚ã ãƒ»ã€œã¨ã“ã‚ã«ã€œãƒ»ã€œã¨ã“ã‚ã¸ã€œ</h2><p>ã¡ã‚‡ã†ã©Aã‚’ã™ã‚‹å‰ã«ãƒ»ã‚’ã—ã¦ã„ã‚‹æ™‚ã«ãƒ»ãŒçµ‚ã‚ã£ãŸæ™‚ã«BãŒç™ºç”Ÿã—ãŸã€‚</p><blockquote><p>å¯ã‚ˆã†ã¨ã„ãŸã¨ã“ã‚ã«ã€ãƒãƒ£ã‚¤ãƒ ãŒé³´ã£ãŸã€‚</p></blockquote><h1 id="N1"><a href="#N1" class="headerlink" title="N1"></a>N1</h1><h2 id="ã¨ã“ã‚ãƒ»ã¨ã“ã‚ã‚’"><a href="#ã¨ã“ã‚ãƒ»ã¨ã“ã‚ã‚’" class="headerlink" title="ã¨ã“ã‚ãƒ»ã¨ã“ã‚ã‚’"></a>ã¨ã“ã‚ãƒ»ã¨ã“ã‚ã‚’</h2><p>ç›¸æ‰‹ã«å¯¾ã™ã‚‹è¬ç½ªãƒ»ä¾é ¼ãƒ»æŒ¨æ‹¶ãªã©ã®å ´åˆã«ä½¿ã†ã€‚</p><blockquote><p>ãŠå¿™ã—ã„ã¨ã“ã‚ä¸­ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ãŒã€å°‘ã—ä¼‘æš‡ã®è©±ã§ã™ãŒâ€¦</p></blockquote><h2 id="ãŸã¨ã“ã‚ã§"><a href="#ãŸã¨ã“ã‚ã§" class="headerlink" title="ãŸã¨ã“ã‚ã§"></a>ãŸã¨ã“ã‚ã§</h2><p>ã€Œï¼‘ã€Aå‹•ä½œãŒçµ‚ã‚ã£ãŸå¾Œã™ãBå‹•ä½œãŒç™ºç”Ÿã—ãŸã“ã¨ã‚’è¡¨ã™ã€‚</p><blockquote><p>ãƒ™ãƒƒãƒ‰ã«ç€ã„ãŸã¨ã“ã‚ã§ã™ãã«å¯ãŸã€‚</p></blockquote><p>ã€Œï¼’ã€Aäº‹é …ãŒä»®ã«æˆç«‹ã—ãŸã¨ã—ã¦ã‚‚ã€Bäº‹é …ã«å½±éŸ¿ã¯ã»ã¼ãªã„ã“ã¨ã‚’è¡¨ã™è¡¨ç¾ã§ã™ã€‚</p><blockquote><p>ä»Šèµ·ãã‚‹ã¨ã“ã‚ã§ä¸–ç•Œã¯å¹³å’Œã«ãªã‚‹ã¯ãšãªã„ã€‚</p></blockquote><h2 id="ã¨ã“ã‚ã§"><a href="#ã¨ã“ã‚ã§" class="headerlink" title="ã¨ã“ã‚ã§"></a>ã¨ã“ã‚ã§</h2><p>è©±é¡Œã‚’å¤‰ãˆã‚‹è¡¨ç¾ã§ã™ã€‚</p><blockquote><p>ã¨ã“ã‚ã§å¯ã¾ã›ã‚“ã‹ï¼Ÿä¸€ç·’ã«ã€‚</p></blockquote><h2 id="ã€œãŸã‚‰ãƒ»ã°ã€œã¨ã“ã‚ã "><a href="#ã€œãŸã‚‰ãƒ»ã°ã€œã¨ã“ã‚ã " class="headerlink" title="ã€œãŸã‚‰ãƒ»ã°ã€œã¨ã“ã‚ã "></a>ã€œãŸã‚‰ãƒ»ã°ã€œã¨ã“ã‚ã </h2><p>å®Ÿéš›ã«ã¯èµ·ã“ã‚‰ãªã‹ã£ãŸAäº‹é …ã¯ã€ã‚‚ã—èµ·ã“ã£ã¦ã„ã‚Œã°BçŠ¶æ³ã«ãªã‚‹è¡¨ç¾ã§ã™ã€‚</p><blockquote><p>å¾¹å¤œã‚’ã—ãŸã‚‰ã€èµ·ããªã„ã¨ã“ã‚ã ã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Lanaguage</category>
      
    </categories>
    
    
    <tags>
      
      <tag>language</tag>
      
      <tag>japanese</tag>
      
      <tag>æ–‡æ³•</tag>
      
      <tag>grammar</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hystrix</title>
    <link href="/2022/06/22/hystrix/"/>
    <url>/2022/06/22/hystrix/</url>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://github.com/Netflix/Hystrix/wiki">å®˜æ–¹æ–‡æ¡£</a></p></blockquote><h2 id="Hystrixçš„ä¸»è¦åŠŸèƒ½"><a href="#Hystrixçš„ä¸»è¦åŠŸèƒ½" class="headerlink" title="Hystrixçš„ä¸»è¦åŠŸèƒ½"></a>Hystrixçš„ä¸»è¦åŠŸèƒ½</h2><ol><li>çº¿ç¨‹æ‹†åˆ†ã€éš”ç¦»</li><li>é™çº§ã€ç†”æ–­</li><li>è¶…æ—¶</li><li>ç¼“å­˜</li><li>ç›‘æ§</li></ol><h3 id="çº¿ç¨‹æ‹†åˆ†ã€éš”ç¦»"><a href="#çº¿ç¨‹æ‹†åˆ†ã€éš”ç¦»" class="headerlink" title="çº¿ç¨‹æ‹†åˆ†ã€éš”ç¦»"></a>çº¿ç¨‹æ‹†åˆ†ã€éš”ç¦»</h3><p>ä»»åŠ¡çº¿ç¨‹å’Œè¯·æ±‚çº¿ç¨‹éš”ç¦»ï¼Œæ¯ç§ä»»åŠ¡ï¼ˆcommandï¼‰ä½¿ç”¨ä¸åŒçš„çº¿ç¨‹æ± ï¼Œç›¸äº’é—´éš”ç¦»ã€‚</p><h3 id="é™çº§"><a href="#é™çº§" class="headerlink" title="é™çº§"></a>é™çº§</h3><p>è¶…æ—¶ã€å¼‚å¸¸ã€çº¿ç¨‹æ± é¥±å’Œéƒ½ä¼šæ‰§è¡Œé™çº§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommandHelloWorld</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HystrixCommand</span>&lt;String&gt; &#123;<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String name;<br><br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">CommandHelloWorld</span><span class="hljs-params">(String name)</span> &#123;<br>    <span class="hljs-built_in">super</span>(HystrixCommandGroupKey.Factory.asKey(<span class="hljs-string">&quot;ExampleGroup&quot;</span>));<br>    <span class="hljs-built_in">this</span>.name = name;<br>  &#125;<br><br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// è¿™é‡Œæ˜¯æ­£å¸¸ä¸šåŠ¡</span><br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>();<br>  &#125;<br><br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">getFallback</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// é™çº§åçš„å†…å®¹</span><br>      <span class="hljs-comment">// 1. å¦‚æœè¿™é‡Œä¸æ˜¯å›ºå®šçš„å†…å®¹è¿˜æœ‰â€œé™çº§ä¸šåŠ¡â€ï¼Œ</span><br>      <span class="hljs-comment">// éœ€è¦åœ¨è¿™é‡Œåˆ›å»ºæ–°çš„commandï¼Œç›¸å½“äºå†åŠ ä¸€çº§ã€‚</span><br>      <span class="hljs-comment">// 2. å¦‚æœè¿™é‡Œâ€œé™çº§ä¸šåŠ¡â€æ˜¯æŸ¥è¯¢ç¼“å­˜ä¸€ç±»çš„ä½I/Oè¡Œä¸º</span><br>      <span class="hljs-comment">// å¯ä»¥è€ƒè™‘ä½¿ç”¨â€œä¿¡å·é‡â€</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;dummy message&quot;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é™çº§ç­–ç•¥</p><ul><li>fail fast å¿«é€Ÿå¤±è´¥ï¼šrunä¸­ç›´æ¥æŠ›å‡ºé”™è¯¯</li><li>fail slient æ— å£°å¤±è´¥ï¼šè¿”å›ç©ºå†…å®¹ï¼Œæ¯”å¦‚ç©ºmapã€listã€nullã€new Objectç­‰</li><li>static&#x2F;stubbed é™æ€&#x2F;ç»„è£…é»˜è®¤å¯¹è±¡ï¼š è¿”å›é™æ€å†…å®¹æˆ–è€…newä¸€ä¸ªé»˜è®¤å€¼çš„å¯¹è±¡</li><li>cache ç¼“å­˜ï¼šæŸ¥è¯¢æœ‰ä¸€å®šæ•°æ®ç‰ˆæœ¬å»¶è¿Ÿçš„è¿œç¨‹å†…å®¹æ¯”å¦‚ç¼“å­˜ï¼ˆåœ¨ä¸Šé¢æ³¨é‡Šé‡Œé¢æœ‰æï¼‰</li></ul><h3 id="ç†”æ–­"><a href="#ç†”æ–­" class="headerlink" title="ç†”æ–­"></a>ç†”æ–­</h3><p><code>å…³é—­</code>çŠ¶æ€ï¼Œå¦‚æœä¸€æ®µæ—¶é—´æ€»çš„è¯·æ±‚æ•°è¾¾åˆ°<code>circuitBreaker.requestVolumeThreshold</code>ä¸”å¤±è´¥çš„è¯·æ±‚æ•°å¤§äº<code>circuitBreaker.errorThresholdPercentage</code>è¿™ä¸ªç™¾åˆ†æ¯”ï¼Œæ–­è·¯å™¨å°±ä¼šè¿›å…¥<code>æ‰“å¼€</code>çŠ¶æ€ï¼Œæ‰“å¼€çŠ¶æ€ä¸‹æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šç›´æ¥æ‰§è¡Œé™çº§é€»è¾‘ï¼Œç„¶ååœ¨<code>circuitBreaker.sleepWindowInMilliseconds</code>è¿™ä¸ªæ—¶é—´åä¼šè¿›å…¥<code>åŠå¼€</code>çŠ¶æ€ï¼ŒåŠå¼€çŠ¶æ€ä¸‹ä¼šå°è¯•æ”¾ä¸€ä¸ªè¯·æ±‚ï¼Œå¦‚æœï¼š</p><ol><li>è¯¥è¯·æ±‚æˆåŠŸï¼Œåˆ™ä¼šè¿›å…¥<code>å…³é—­</code>çŠ¶æ€</li><li>è¯¥è¯·æ±‚å¤±è´¥ï¼Œä¿æŒ<code>æ‰“å¼€</code>çŠ¶æ€ï¼ˆå°†å½“å‰æ—¶é—´è®¾ç½®ä¸ºæ‰“å¼€æ—¶é—´ï¼Œå†æ¬¡ç­‰å¾…<code>circuitBreaker.sleepWindowInMilliseconds</code>è¿›å…¥<code>åŠå¼€</code>ï¼‰</li></ol><p>æ ¹æ®<a href="#%E9%99%8D%E7%BA%A7">é™çº§</a>ï¼Œhystrixçš„ç†”æ–­é™çº§æ¡ä»¶å¯ä»¥æ¦‚æ‹¬ä¸º<code>é«˜å»¶è¿Ÿ</code>ã€<code>ä½æœåŠ¡è´¨é‡</code>ã€<code>è¶…é™å¹¶å‘</code></p><h3 id="ä»»åŠ¡çš„è¶…æ—¶é…ç½®"><a href="#ä»»åŠ¡çš„è¶…æ—¶é…ç½®" class="headerlink" title="ä»»åŠ¡çš„è¶…æ—¶é…ç½®"></a>ä»»åŠ¡çš„è¶…æ—¶é…ç½®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">CommandHelloWorld</span><span class="hljs-params">(String name)</span> &#123;<br>  <span class="hljs-built_in">super</span>(Setter<br>    .withGroupKey(HystrixCommandGroupKey.Factory.asKey(<span class="hljs-string">&quot;ExampleGroup&quot;</span>))<br>    .andCommandPropertiesDefaults(<br>      HystrixCommandProperties.Setter()<br>      <span class="hljs-comment">// è®¾ç½®1sè¶…æ—¶</span><br>      .withExecutionTimeoutInMilliseconds(<span class="hljs-number">1000</span>)<br>    ));<br>  <span class="hljs-built_in">this</span>.name = name;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¶…æ—¶ä¼šè°ƒç”¨<code>getFallback()</code></p><h3 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h3><p>ï¼ˆHystrixRequestContextã€ç•¥ï¼‰</p><h3 id="ç›‘æ§"><a href="#ç›‘æ§" class="headerlink" title="ç›‘æ§"></a>ç›‘æ§</h3><p>ï¼ˆhystrix-metrics-event-streamã€ç•¥ï¼‰</p><p><img src="/2022/06/22/hystrix/hystrix.webp" alt="hystrix"></p>]]></content>
    
    
    <categories>
      
      <category>Distributed services</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Netflix Hystrix</tag>
      
      <tag>Spring Cloud</tag>
      
      <tag>microservice</tag>
      
      <tag>distributed services</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Blenderå­¦ä¹ ç¬”è®°0</title>
    <link href="/2022/06/18/blender-learning-memo0/"/>
    <url>/2022/06/18/blender-learning-memo0/</url>
    
    <content type="html"><![CDATA[<blockquote><p>å‚ç…§<a href="https://docs.blender.org/manual/zh-hans/3.1/render/shader_nodes/shader/principled.html">å®˜æ–¹æ–‡æ¡£</a>å­¦ä¹ ğŸ™‚</p></blockquote><h2 id="ç€è‰²å™¨shader"><a href="#ç€è‰²å™¨shader" class="headerlink" title="ç€è‰²å™¨shader"></a>ç€è‰²å™¨<code>shader</code></h2><h3 id="åŸç†åŒ–BSDFpricipled-BSDF"><a href="#åŸç†åŒ–BSDFpricipled-BSDF" class="headerlink" title="åŸç†åŒ–BSDFpricipled BSDF"></a>åŸç†åŒ–BSDF<code>pricipled BSDF</code></h3><p>è‡ªå¸¦çš„eeveeå’Œcyclesï¼ˆæˆ–cycles-eä¹‹ç±»çš„è¡ç”Ÿï¼‰æ¸²æŸ“å™¨ä½¿ç”¨çš„ç€è‰²å™¨ã€‚</p><blockquote><p>å¦‚æœä½¿ç”¨octaneæ¸²æŸ“å™¨ï¼Œå°±è¦ç”¨universal materialç€è‰²å™¨ï¼Œä½†åŸºæœ¬çš„ç€è‰²åŸç†å¤§å·®ä¸å·®</p></blockquote><h3 id="è¾“å…¥"><a href="#è¾“å…¥" class="headerlink" title="è¾“å…¥"></a>è¾“å…¥</h3><p><img src="/2022/06/18/blender-learning-memo0/render_shader-nodes_shader_principled_node.png" alt="principled BSDF"></p><h4 id="åŸºç¡€è‰²Base-Color"><a href="#åŸºç¡€è‰²Base-Color" class="headerlink" title="åŸºç¡€è‰²Base Color"></a>åŸºç¡€è‰²<code>Base Color</code></h4><p>æ¼«å°„æˆ–é‡‘å±è¡¨é¢é¢œè‰²ã€‚</p><h4 id="æ¬¡è¡¨é¢Subsurface"><a href="#æ¬¡è¡¨é¢Subsurface" class="headerlink" title="æ¬¡è¡¨é¢Subsurface"></a>æ¬¡è¡¨é¢<code>Subsurface</code></h4><p>æ¼«åå°„å’Œæ¬¡è¡¨é¢æ•£å°„ä¹‹é—´çš„æ··åˆã€‚å¹¶éæ¼«åå°„å’Œæ¬¡è¡¨é¢æ•£å°„ä¹‹é—´çš„ç®€å•æ··åˆï¼Œè€Œæ˜¯ä¼šä¸æ¬¡è¡¨é¢åŠå¾„çš„æ•°å€¼è¿›è¡Œç›¸ä¹˜è¿ç®—ã€‚</p><h4 id="æ¬¡è¡¨é¢åŠå¾„Subsurface-Radius"><a href="#æ¬¡è¡¨é¢åŠå¾„Subsurface-Radius" class="headerlink" title="æ¬¡è¡¨é¢åŠå¾„Subsurface Radius"></a>æ¬¡è¡¨é¢åŠå¾„<code>Subsurface Radius</code></h4><p>å…‰æ•£å°„åˆ°è¡¨é¢ä¸‹æ–¹çš„å¹³å‡è·ç¦»ã€‚è¾ƒé«˜çš„åŠå¾„å¯ä»¥ä½¿å¤–è§‚æ›´æŸ”å’Œï¼Œå› ä¸ºå…‰çº¿ä¼šæµå…¥é˜´å½±åŒºåŸŸå¹¶ç©¿è¿‡ç‰©ä½“ã€‚æ•£å°„è·ç¦»æ˜¯é’ˆå¯¹RGBé€šé“å•ç‹¬æŒ‡å®šçš„ï¼Œå¯¹äºå…·æœ‰è¾ƒå¼ºçº¢å…‰æ•£å°„çš„çš®è‚¤æè´¨ï¼Œæ¸²æŸ“æ•ˆæœè¾ƒä½³ã€‚Xï¼ŒYå’ŒZçš„æ•°å€¼ä¼šåˆ†åˆ«æ˜ å°„åˆ°Rï¼ŒGå’ŒBçš„å€¼ã€‚</p><h4 id="æ¬¡è¡¨é¢é¢œè‰²Subsurface-Color"><a href="#æ¬¡è¡¨é¢é¢œè‰²Subsurface-Color" class="headerlink" title="æ¬¡è¡¨é¢é¢œè‰²Subsurface Color"></a>æ¬¡è¡¨é¢é¢œè‰²<code>Subsurface Color</code></h4><p>æ¬¡è¡¨é¢åŸºç¡€é¢œè‰²ã€‚</p><h4 id="æ¬¡è¡¨é¢æŠ˜å°„ç‡Subsurface-IORï¼ˆåªæ”¯æŒcyclesï¼‰"><a href="#æ¬¡è¡¨é¢æŠ˜å°„ç‡Subsurface-IORï¼ˆåªæ”¯æŒcyclesï¼‰" class="headerlink" title="æ¬¡è¡¨é¢æŠ˜å°„ç‡Subsurface IORï¼ˆåªæ”¯æŒcyclesï¼‰"></a>æ¬¡è¡¨é¢æŠ˜å°„ç‡<code>Subsurface IOR</code>ï¼ˆåªæ”¯æŒcyclesï¼‰</h4><p>æ¬¡è¡¨é¢æ•£å°„çš„æŠ˜å°„ç‡ã€‚</p><h4 id="æ¬¡è¡¨é¢å„å‘å¼‚æ€§Subsurface-Anisotropyï¼ˆåªæ”¯æŒcyclesï¼‰"><a href="#æ¬¡è¡¨é¢å„å‘å¼‚æ€§Subsurface-Anisotropyï¼ˆåªæ”¯æŒcyclesï¼‰" class="headerlink" title="æ¬¡è¡¨é¢å„å‘å¼‚æ€§Subsurface Anisotropyï¼ˆåªæ”¯æŒcyclesï¼‰"></a>æ¬¡è¡¨é¢å„å‘å¼‚æ€§<code>Subsurface Anisotropy</code>ï¼ˆåªæ”¯æŒcyclesï¼‰</h4><p>æ§åˆ¶æ¬¡è¡¨é¢æ•£å°„çš„æ–¹å‘æ€§ã€‚</p><h4 id="é‡‘å±åº¦Metallic"><a href="#é‡‘å±åº¦Metallic" class="headerlink" title="é‡‘å±åº¦Metallic"></a>é‡‘å±åº¦<code>Metallic</code></h4><p>ä»æ— é‡‘å±åˆ°å…¨é‡‘å±çš„æ··åˆæè´¨æ¨¡å¼ã€‚æ•°å€¼ä¸º1.0æ—¶è¡¨ç°ä¸ºåŸºç¡€é¢œè‰²å åŠ å®Œå…¨é•œé¢åå°„ç€è‰²ï¼Œä¸å«ä»»ä½•æ¼«å°„æˆ–é€æ˜å±æ€§ã€‚æ•°å€¼ä¸º0.0æ—¶æè´¨å˜ç°ä¸ºåº•å±‚çš„æ¼«å°„æˆ–é€æ˜å±‚æ ·å­ï¼Œä½†é¡¶éƒ¨ä»ä¿ç•™ç€ä¸€å±‚åå°„å±‚ã€‚</p><h4 id="é•œé¢åå°„Specular"><a href="#é•œé¢åå°„Specular" class="headerlink" title="é•œé¢åå°„Specular"></a>é•œé¢åå°„<code>Specular</code></h4><p>éä¼ å¯¼æ€§é«˜å…‰åå°„é‡ã€‚è¡¨é¢æ²¿æ³•çº¿æ–¹å‘çš„åå°„ç‡å¸¸è®¾å®šåœ¨0-8ï¼…èŒƒå›´å†…ã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªç‰¹æ®Šæƒ…å†µä¸‹çš„è²æ¶…è€³å…¬å¼ï¼Œæ¥è®¡ç®—å…·æœ‰å·²çŸ¥æŠ˜å°„ç‡çš„çœŸå®æè´¨è®¡ç®—é«˜å…‰å€¼ï¼š<br>    specular = ((ior - 1)/(ior + 1))^2 / 0.08 <br>ä¾‹å¦‚ï¼š<br>    æ°´: æŠ˜å°„ç‡ = 1.33, é«˜å…‰ = 0.25<br>    ç»ç’ƒ: æŠ˜å°„ç‡ = 1.5, é«˜å…‰ = 0.5<br>    é’»çŸ³: æŠ˜å°„ç‡ = 2.417, é«˜å…‰ = 2.15<br>ç”±äºç¡®å®å­˜åœ¨åå°„ç‡é«˜äº8ï¼…çš„ææ–™ï¼Œå› æ­¤è¯¥å¤„å…è®¸å–å€¼å¤§äº1ã€‚<br></code></pre></td></tr></table></figure><h4 id="é«˜å…‰æŸ“è‰²Specular-Tint"><a href="#é«˜å…‰æŸ“è‰²Specular-Tint" class="headerlink" title="é«˜å…‰æŸ“è‰²Specular Tint"></a>é«˜å…‰æŸ“è‰²<code>Specular Tint</code></h4><p>ä½¿ç”¨åŸºç¡€è‰²å¯¹æœå‘é¢è¿›è¡Œé«˜å…‰åå°„ï¼Œè€Œé•œé¢åå°„ä¿æŒç™½è‰²ã€‚</p><p>æ™®é€šç”µä»‹è´¨å…·æœ‰æ— è‰²åå°„ï¼Œå› æ­¤è¯¥å‚æ•°åœ¨æŠ€æœ¯ä¸Šå¹¶ä¸å…·æœ‰ç‰©ç†å­¦ä¸Šçš„æ­£ç¡®æ€§ï¼Œä½†å¯ç”¨äºæ¨¡æ‹Ÿå…·æœ‰å¤æ‚è¡¨é¢ç»“æ„çš„æè´¨å¤–è§‚ã€‚</p><h4 id="ç²—ç³™åº¦Roughness"><a href="#ç²—ç³™åº¦Roughness" class="headerlink" title="ç²—ç³™åº¦Roughness"></a>ç²—ç³™åº¦<code>Roughness</code></h4><p>ç”¨äºç¡®å®šæ¼«åå°„å’Œé•œé¢åå°„æ—¶ï¼Œç‰©ä½“è¡¨é¢çš„å¾®å¹³é¢ç²—ç³™åº¦ã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">ä»æ—§ç‰ˆçš„ å…‰æ³½ BSDF ç€è‰²å™¨èŠ‚ç‚¹è½¬æ¢æ—¶ï¼Œåº”ä½¿ç”¨åŸå§‹å€¼çš„å¹³æ–¹æ ¹ã€‚<br></code></pre></td></tr></table></figure><h4 id="å„å‘å¼‚æ€§è¿‡æ»¤Anisotropicï¼ˆåªæ”¯æŒcyclesï¼‰"><a href="#å„å‘å¼‚æ€§è¿‡æ»¤Anisotropicï¼ˆåªæ”¯æŒcyclesï¼‰" class="headerlink" title="å„å‘å¼‚æ€§è¿‡æ»¤Anisotropicï¼ˆåªæ”¯æŒcyclesï¼‰"></a>å„å‘å¼‚æ€§è¿‡æ»¤<code>Anisotropic</code>ï¼ˆåªæ”¯æŒcyclesï¼‰</h4><p>é•œé¢åå°„çš„å„å‘å¼‚æ€§é‡ã€‚è¾ƒé«˜çš„è®¾å®šå€¼å¯æä¾›æ²¿åˆ‡çº¿æ–¹å‘çš„ç»†é•¿é«˜å…‰ï¼›è®¾å®šä¸ºè´Ÿå€¼åˆ™ä¼šç»™å‡ºå‚ç›´äºåˆ‡çº¿æ–¹å‘çš„é«˜å…‰ã€‚</p><h4 id="å„å‘å¼‚æ€§æ—‹è½¬Anisotropic-Rotationï¼ˆåªæ”¯æŒcyclesï¼‰"><a href="#å„å‘å¼‚æ€§æ—‹è½¬Anisotropic-Rotationï¼ˆåªæ”¯æŒcyclesï¼‰" class="headerlink" title="å„å‘å¼‚æ€§æ—‹è½¬Anisotropic Rotationï¼ˆåªæ”¯æŒcyclesï¼‰"></a>å„å‘å¼‚æ€§æ—‹è½¬<code>Anisotropic Rotation</code>ï¼ˆåªæ”¯æŒcyclesï¼‰</h4><p>æ—‹è½¬å„å‘å¼‚æ€§çš„æ–¹å‘ï¼Œå–å€¼ä¸º1.0æ—¶ï¼Œæ—‹è½¬ä¸€å‘¨ã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">ä¸ å„å‘å¼‚æ€§ BSDF ç€è‰²å™¨èŠ‚ç‚¹ä¸åŒï¼Œè¯¥èŠ‚ç‚¹çš„é«˜å…‰å»¶ä¼¸æ–¹å‘ä¼šæ—‹è½¬90Â°ã€‚å¯é€šè¿‡å¢åŠ 0.25çš„æ—‹è½¬å€¼è¿›è¡Œæ›´æ­£ã€‚<br></code></pre></td></tr></table></figure><p><img src="/2022/06/18/blender-learning-memo0/render_shader-nodes_shader_principled_example-2a.jpg" alt="Anisotropic &amp; Roughness 1"><br><img src="/2022/06/18/blender-learning-memo0/render_shader-nodes_shader_principled_example-2b.jpg" alt="Anisotropic &amp; Roughness 2"></p><h4 id="å…‰æ³½Sheen"><a href="#å…‰æ³½Sheen" class="headerlink" title="å…‰æ³½Sheen"></a>å…‰æ³½<code>Sheen</code></h4><p>è¾¹ç¼˜é™„è¿‘ç±»ä¼¼å¤©é¹…ç»’æè´¨çš„åå°„æ•°é‡ï¼Œç”¨äºæ¨¡æ‹Ÿå¸ƒæ–™ç­‰æè´¨ã€‚</p><ul><li>ä¹Ÿå¯ä»¥ç”¨äºè¡¨ç°äººè„¸æˆ–è€…çš®è‚¤ä¸Šé¢çš„æ±—æ¯›æ•ˆæœï¼Œåœ¨å…‰ç…§ä¸‹å¾®å¾®çš„å‘å…‰</li></ul><h4 id="å…‰æ³½æŸ“è‰²Sheen-Tint"><a href="#å…‰æ³½æŸ“è‰²Sheen-Tint" class="headerlink" title="å…‰æ³½æŸ“è‰²Sheen Tint"></a>å…‰æ³½æŸ“è‰²<code>Sheen Tint</code></h4><p>åœ¨ç™½è‰²å’ŒåŸºç¡€è‰²ä¹‹é—´è¿›è¡Œæ··åˆï¼Œä»¥è·å¾—å…‰æ³½åå°„æ•ˆæœã€‚</p><h4 id="æ¸…æ¼†Clearcoat"><a href="#æ¸…æ¼†Clearcoat" class="headerlink" title="æ¸…æ¼†Clearcoat"></a>æ¸…æ¼†<code>Clearcoat</code></h4><p>ç‰©ä½“é¡¶éƒ¨çš„ç™½è‰²é«˜å…‰å±‚ã€‚é€‚ç”¨äºæ±½è½¦æ²¹æ¼†ç­‰æè´¨çš„æ¨¡æ‹Ÿã€‚</p><h4 id="æ¸…æ¼†ç²—ç³™åº¦Clearcoat-Roughness"><a href="#æ¸…æ¼†ç²—ç³™åº¦Clearcoat-Roughness" class="headerlink" title="æ¸…æ¼†ç²—ç³™åº¦Clearcoat Roughness"></a>æ¸…æ¼†ç²—ç³™åº¦<code>Clearcoat Roughness</code></h4><p>æ¸…æ¼†çš„ç²—ç³™åº¦ã€‚</p><h4 id="IOR"><a href="#IOR" class="headerlink" title="IOR"></a>IOR</h4><p>æŠ˜å°„ç‡ã€‚</p><h4 id="ä¼ é€’é‡‡æ ·Transmission"><a href="#ä¼ é€’é‡‡æ ·Transmission" class="headerlink" title="ä¼ é€’é‡‡æ ·Transmission"></a>ä¼ é€’é‡‡æ ·<code>Transmission</code></h4><p>æ•°å€¼è®¾å®šä¸º0æ—¶ï¼Œè¡¨é¢å®Œå…¨ä¸é€æ˜ï¼›æ•°å€¼è®¾å®šä¸º1æ—¶ï¼Œè¡¨é¢ä¸ºç»ç’ƒçŠ¶ã€‚ä¸åŒçš„å–å€¼ä»£è¡¨ä¸Šè¿°ä¸¤ç§çŠ¶æ€çš„æ··åˆæ•ˆæœã€‚</p><h4 id="é€å°„ç²—ç³™åº¦Transmission-Roughnessï¼ˆåªæ”¯æŒcyclesï¼‰"><a href="#é€å°„ç²—ç³™åº¦Transmission-Roughnessï¼ˆåªæ”¯æŒcyclesï¼‰" class="headerlink" title="é€å°„ç²—ç³™åº¦Transmission Roughnessï¼ˆåªæ”¯æŒcyclesï¼‰"></a>é€å°„ç²—ç³™åº¦<code>Transmission Roughness</code>ï¼ˆåªæ”¯æŒcyclesï¼‰</h4><p>ä¸ GGX åˆ†å¸ƒä¸€èµ·ï¼Œç”¨äºæ§åˆ¶é€å°„å…‰çš„ç²—ç³™åº¦ã€‚</p><h4 id="è‡ªå‘å…‰-å‘å°„-Emission"><a href="#è‡ªå‘å…‰-å‘å°„-Emission" class="headerlink" title="è‡ªå‘å…‰(å‘å°„)Emission"></a>è‡ªå‘å…‰(å‘å°„)<code>Emission</code></h4><p>æ¥è‡ªè¡¨é¢çš„è‡ªå‘å…‰ï¼Œä¸è‡ªå‘å…‰ç€è‰²å™¨ç±»ä¼¼ã€‚</p><h4 id="è‡ªå‘å…‰å¼ºåº¦Emission-Strength"><a href="#è‡ªå‘å…‰å¼ºåº¦Emission-Strength" class="headerlink" title="è‡ªå‘å…‰å¼ºåº¦Emission Strength"></a>è‡ªå‘å…‰å¼ºåº¦<code>Emission Strength</code></h4><p>å‘å°„å…‰çš„å¼ºåº¦ã€‚å€¼ 1.0 å°†ç¡®ä¿å›¾åƒä¸­çš„å¯¹è±¡å…·æœ‰ä¸è‡ªå‘å…‰é¢œè‰²å®Œå…¨ç›¸åŒçš„é¢œè‰²ï¼Œå³ä½¿å…¶â€œæ— é˜´å½±â€ã€‚</p><h4 id="Alpha"><a href="#Alpha" class="headerlink" title="Alpha"></a>Alpha</h4><p>æ§åˆ¶è¡¨é¢çš„é€æ˜åº¦ï¼Œæ•°å€¼è®¾å®šä¸º1.0æ—¶ï¼Œè¡¨é¢å®Œå…¨ä¸é€æ˜ã€‚é€šå¸¸è¿æ¥åˆ° â€œå›¾åƒçº¹ç†â€ ç€è‰²å™¨èŠ‚ç‚¹çš„Alphaè¾“å‡ºæ¥å£ã€‚</p><h4 id="æ³•å‘Normal"><a href="#æ³•å‘Normal" class="headerlink" title="æ³•å‘Normal"></a>æ³•å‘<code>Normal</code></h4><p>æ§åˆ¶åŸºç¡€å›¾å±‚çš„æ³•çº¿æ–¹å‘ã€‚</p><h4 id="æ¸…æ¼†æ³•çº¿Clearcoat-Normal"><a href="#æ¸…æ¼†æ³•çº¿Clearcoat-Normal" class="headerlink" title="æ¸…æ¼†æ³•çº¿Clearcoat Normal"></a>æ¸…æ¼†æ³•çº¿<code>Clearcoat Normal</code></h4><p>æ§åˆ¶ æ¸…æ¼† å›¾å±‚çš„æ³•çº¿æ–¹å‘ã€‚</p><h4 id="åˆ‡å‘-æ­£åˆ‡-Tangent"><a href="#åˆ‡å‘-æ­£åˆ‡-Tangent" class="headerlink" title="åˆ‡å‘(æ­£åˆ‡)Tangent"></a>åˆ‡å‘(æ­£åˆ‡)<code>Tangent</code></h4><p>æ§åˆ¶ å„å‘å¼‚æ€§ å›¾å±‚çš„æ³•çº¿æ–¹å‘ã€‚</p><h3 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><h4 id="åˆ†å¸ƒ"><a href="#åˆ†å¸ƒ" class="headerlink" title="åˆ†å¸ƒ"></a>åˆ†å¸ƒ</h4><ul><li>GGX<ul><li>æ¯” å¤šé‡æ•£å°„ GGX æ¸²æŸ“é€Ÿåº¦å¿«ï¼Œä½†ä¸å¤Ÿç²¾ç¡®ã€‚é€‰æ‹©å®ƒåï¼Œå¯ä»¥å¯ç”¨ é€å°„ç²—ç³™åº¦ è¾“å…¥é€‰é¡¹ã€‚</li></ul></li><li>å¤šé‡æ•£å°„ GGX<ul><li>ä¼šè®¡ç®—å¾®å¹³é¢ä¹‹é—´çš„å¤šæ¬¡åå¼¹å’Œæ•£å°„ã€‚è¿™æ ·å°±å¯ä»¥ä½¿ç‰©ä½“ä¸ä¼šå› ä¸ºè¿‡åº¦å˜æš—è€Œæ˜¾å¾—çªå…€ã€‚</li></ul></li></ul><h4 id="æ¬¡è¡¨é¢æ–¹æ³•"><a href="#æ¬¡è¡¨é¢æ–¹æ³•" class="headerlink" title="æ¬¡è¡¨é¢æ–¹æ³•"></a>æ¬¡è¡¨é¢æ–¹æ³•</h4><p>æ¨¡æ‹Ÿæ¬¡è¡¨é¢æ•£å°„çš„æ¸²æŸ“æ–¹å¼ã€‚eeveeä¸æ”¯æŒ</p><ul><li>å…‹é‡Œæ–¯å¦æ£®-ä¼¯åˆ©<ul><li>åŸºäºç‰©ç†çš„ä½“ç§¯æ•£å°„çš„è¿‘ä¼¼å€¼ã€‚è¿™ç§æ–¹æ³•ä¸å¦‚éšæœºæ¸¸èµ°å‡†ç¡®ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ç§æ–¹æ³•ä¼šæ›´å¿«åœ°è§£å†³å™ªå£°ã€‚</li></ul></li><li>éšæœºæ¸¸èµ°ï¼ˆå›ºå®šåŠå¾„ï¼‰<ul><li>ä¸ºè–„è€Œå¼¯æ›²çš„ç‰©ä½“æä¾›å‡†ç¡®çš„ç»“æœã€‚ Random Walk åœ¨ç½‘æ ¼å†…éƒ¨ä½¿ç”¨çœŸæ­£çš„ä½“ç§¯æ•£å°„ï¼Œè¿™æ„å‘³ç€å®ƒæœ€é€‚åˆå°é—­ç½‘æ ¼ã€‚ç½‘æ ¼ä¸­çš„é‡å é¢å’Œå­”å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚</li></ul></li><li>éšæœºæ¸¸èµ°<ul><li>è¡Œä¸ºç±»ä¼¼äºéšæœºæ¸¸èµ°ï¼ˆå›ºå®šåŠå¾„ï¼‰ï¼Œä½†æ ¹æ®é¢œè‰²ã€æ¬¡è¡¨é¢å„å‘å¼‚æ€§å’Œæ¬¡è¡¨é¢ IOR è°ƒæ•´æ¬¡è¡¨é¢åŠå¾„ã€‚å› æ­¤ï¼Œæ­¤æ–¹æ³•è¯•å›¾ä¿ç•™æ¯”éšæœºæ¸¸èµ°ï¼ˆå›ºå®šåŠå¾„ï¼‰æ›´å¤šçš„è¡¨é¢ç»†èŠ‚å’Œé¢œè‰²ã€‚</li></ul></li></ul><h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><p><img src="/2022/06/18/blender-learning-memo0/render_shader-nodes_shader_principled_example-1a.jpg" alt="principled example 1"></p>]]></content>
    
    
    <categories>
      
      <category>Blender</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blender</tag>
      
      <tag>shading</tag>
      
      <tag>render</tag>
      
      <tag>cycles</tag>
      
      <tag>eevee</tag>
      
      <tag>BSDF</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MySQLä¸­çš„å¤§å°å†™æ•æ„Ÿæ’åºè§„åˆ™</title>
    <link href="/2022/06/17/case-sensitive-collation-in-mysql/"/>
    <url>/2022/06/17/case-sensitive-collation-in-mysql/</url>
    
    <content type="html"><![CDATA[<h2 id="utf8mb4å­—ç¬¦é›†æ’åºè§„åˆ™"><a href="#utf8mb4å­—ç¬¦é›†æ’åºè§„åˆ™" class="headerlink" title="utf8mb4å­—ç¬¦é›†æ’åºè§„åˆ™"></a>utf8mb4å­—ç¬¦é›†æ’åºè§„åˆ™</h2><p>åœ¨MySQL8.0.1ä¹‹å‰ï¼Œutf8mb4æ²¡æœ‰csæ’åºè§„åˆ™ï¼Œå¤§å°å†™æ•æ„Ÿçš„æ’åºè§„åˆ™åªèƒ½ç”¨<code>utf8mb4_bin</code>ï¼Œç„¶åé€šè¿‡ç±»ä¼¼äº<code>SELECT ... ORDER BY column COLLATE utf8_croatian_ci.</code>çš„æ–¹æ³•æ¥å¾—åˆ°æ›´â€œhumanâ€çš„æ’åºç»“æœã€‚ï¼ˆbinçš„æ’åºæ–¹å¼æŒ‰ç…§ç±»ä¼¼ACSIIé¡ºåºï¼Œæ¯”å¦‚å¤§å°å†™çš„å­—æ¯ä¸ä¸€å®šä¼šåœ¨ä¸€èµ·ï¼‰</p><ul><li><a href="https://forums.mysql.com/read.php?103,156527,198794#msg-198794">SELECT * FROM mytable WHERE name COLLATE utf8_bin &#x3D;â€azoliaâ€</a></li><li><a href="https://forums.mysql.com/read.php?103,19380,200971#msg-200971">SELECT â€¦ ORDER BY column COLLATE utf8_croatian_ci</a></li></ul><p>MySQL8.0.1ä¹‹åçš„ç‰ˆæœ¬æ”¯æŒutf8mb4å­—ç¬¦é›†çš„å¤§å°å†™æ•æ„Ÿæ’åºè§„åˆ™ï¼ˆutf8mb4_0900_*_as_csï¼‰</p><blockquote><p>0900æ˜¯æŒ‡unicodeçš„ç‰ˆæœ¬ï¼ŒåŒutf8mb4_general_520_ciçš„520ï¼Œéƒ½åº”è¯¥æ˜¯æŒ‡æ’åºç®—æ³•ç‰ˆæœ¬ï¼ˆä¸€ç§ç±»ä¼¼è°å‰è°åçš„æ’åºè§„åˆ™ï¼‰ï¼Œæ²¡æœ‰ç»†ç©¶<br>asè¡¨ç¤ºaccent sensitiveï¼ˆç«Ÿç„¶æ”¯æŒäº†é‡éŸ³æ’åºï¼Œä»–çœŸçš„ï¼Œæˆ‘å“­æ­»â€¦ï¼‰</p></blockquote><ul><li><a href="https://dev.mysql.com/blog-archive/mysql-8-0-1-accent-and-case-sensitive-collations-for-utf8mb4/">MySQL 8.0.1: Accent and case sensitive collations for utf8mb4</a></li><li><a href="https://dev.mysql.com/blog-archive/new-collations-in-mysql-8-0-0/">New collations in MySQL 8.0.0</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
      <tag>charset</tag>
      
      <tag>collation</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸€äº›å¥½ç”¨çš„å·¥å…·</title>
    <link href="/2022/06/14/useful-utils/"/>
    <url>/2022/06/14/useful-utils/</url>
    
    <content type="html"><![CDATA[<h2 id="UriComponentsBuilder"><a href="#UriComponentsBuilder" class="headerlink" title="UriComponentsBuilder"></a>UriComponentsBuilder</h2><p><code>org.springframework.web.util.UriComponentsBuilder</code></p><blockquote><p>springå¸¦çš„è§£æuriå·¥å…·</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;http://domain:port/path1/subpath1?param0=0&amp;param1=1&quot;</span>;<br><br>UriComponentsBuilder.fromHttpUrl(url).build();<br>UriComponentsBuilder.fromUri(URI.create(uri)).build();<br>UriComponentsBuilder.fromUriString(uri).build();<br>....<br><br>uriComponents.getHost(); <span class="hljs-comment">// e.g. domain</span><br>uriComponents.getPath(); <span class="hljs-comment">// e.g. /path1/subpath1</span><br>uriComponents.getPathSegments(); <span class="hljs-comment">// e.g. [path1, subpath1]</span><br>uriComponents.getScheme(); <span class="hljs-comment">// e.g. http</span><br>uriComponents.getQueryParams(); <span class="hljs-comment">// [param0:0, param1:1]</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Tools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
      <tag>URI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring rabbitMQ bindingé…ç½®çš„â€œé™·é˜±â€</title>
    <link href="/2022/06/14/spring-rabbitmq-binding-trap/"/>
    <url>/2022/06/14/spring-rabbitmq-binding-trap/</url>
    
    <content type="html"><![CDATA[<h2 id="Spring-RabbitMQ-bindings"><a href="#Spring-RabbitMQ-bindings" class="headerlink" title="Spring RabbitMQ bindings"></a>Spring RabbitMQ bindings</h2><blockquote><p>exchangeçš„<code>auto-declare</code>é…ç½®åŒæ—¶ä½œç”¨äºbindingï¼Œå¦‚æœå£°æ˜æ–°çš„queueï¼Œä½†æ˜¯ç»‘å®šçš„exchangeçš„auto-declareä¸ºfalseï¼Œåˆ™ä¸ä¼šåœ¨æ—¢æœ‰çš„exchangeä¸Šè¿›è¡Œç»‘å®š</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">rabbit:queue</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;queue0.id&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;queue.0.name&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">rabbit:fanout-exchange</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;exchange.0.name&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:bindings</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:binding</span> <span class="hljs-attr">queue</span>=<span class="hljs-string">&quot;queue0.id&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">rabbit:bindings</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">rabbit:fanout-exchange</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è§£æbindingçš„å…¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java">   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doParseBindings</span><span class="hljs-params">(Element element, ParserContext parserContext,</span><br><span class="hljs-params">String exchangeName, Element bindings, AbstractExchangeParser parser)</span> &#123;<br><span class="hljs-keyword">if</span> (bindings != <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-keyword">for</span> (Element binding : DomUtils.getChildElementsByTagName(bindings, BINDING_ELE)) &#123;<br>               <span class="hljs-comment">// è§£ærabbit:binding</span><br><span class="hljs-type">BeanDefinitionBuilder</span> <span class="hljs-variable">bindingBuilder</span> <span class="hljs-operator">=</span> parser.parseBinding(exchangeName, binding,<br>parserContext);<br>               <span class="hljs-comment">// è¿™é‡Œæ˜¯é‡ç‚¹ï¼Œè§£æbindingsçš„æ—¶å€™ï¼Œä¼ å…¥çš„æ˜¯elementï¼Œä¹Ÿå°±æ˜¯rabbit:fanout-exchangeå¯¹åº”çš„å…ƒç´ </span><br>NamespaceUtils.parseDeclarationControls(element, bindingBuilder);<br><span class="hljs-type">BeanDefinition</span> <span class="hljs-variable">beanDefinition</span> <span class="hljs-operator">=</span> bindingBuilder.getBeanDefinition();<br>registerBeanDefinition(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanDefinitionHolder</span>(beanDefinition, parserContext.getReaderContext()<br>.generateBeanName(beanDefinition)), parserContext.getRegistry());<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¯ä¸ªbindingçš„è‡ªåŠ¨å£°æ˜<code>shouldDeclare</code>å±æ€§çš„è®¾ç½®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Parses &#x27;auto-declare&#x27; and &#x27;declared-by&#x27; attributes.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> element The element.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> builder The builder.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parseDeclarationControls</span><span class="hljs-params">(Element element, BeanDefinitionBuilder builder)</span> &#123;<br>       <span class="hljs-comment">// è¿™é‡Œç”¨exchangeçš„auto-declareå±æ€§ä¸ºæ¯ä¸ªbindingè®¾ç½®shouldDeclareå€¼</span><br>NamespaceUtils.setValueIfAttributeDefined(builder, element, <span class="hljs-string">&quot;auto-declare&quot;</span>, <span class="hljs-string">&quot;shouldDeclare&quot;</span>);<br><span class="hljs-type">String</span> <span class="hljs-variable">admins</span> <span class="hljs-operator">=</span> element.getAttribute(<span class="hljs-string">&quot;declared-by&quot;</span>);<br><span class="hljs-keyword">if</span> (StringUtils.hasText(admins)) &#123;<br>String[] adminBeanNames = admins.split(<span class="hljs-string">&quot;,&quot;</span>);<br>ManagedList&lt;BeanReference&gt; adminBeanRefs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ManagedList</span>&lt;BeanReference&gt;();<br><span class="hljs-keyword">for</span> (String adminBeanName : adminBeanNames) &#123;<br>adminBeanRefs.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeBeanReference</span>(adminBeanName.trim()));<br>&#125;<br>builder.addPropertyValue(<span class="hljs-string">&quot;adminsThatShouldDeclare&quot;</span>, adminBeanRefs);<br>&#125;<br>NamespaceUtils.setValueIfAttributeDefined(builder, element, <span class="hljs-string">&quot;ignore-declaration-exceptions&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><code>shouldDeclare</code>åœ¨å£°æ˜ä¸­çš„ä½œç”¨:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Remove any instances that should not be declared by this admin.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> declarables the collection of &#123;<span class="hljs-doctag">@link</span> Declarable&#125;s.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> a new collection containing &#123;<span class="hljs-doctag">@link</span> Declarable&#125;s that should be declared by this</span><br><span class="hljs-comment"> * admin.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">private</span> &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Declarable</span>&gt; Collection&lt;T&gt; <span class="hljs-title function_">filterDeclarables</span><span class="hljs-params">(Collection&lt;T&gt; declarables)</span> &#123;<br>Collection&lt;T&gt; filtered = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;T&gt;();<br><span class="hljs-keyword">for</span> (T declarable : declarables) &#123;<br>Collection&lt;?&gt; adminsWithWhichToDeclare = declarable.getDeclaringAdmins();<br>           <span class="hljs-comment">// æ­¤å¤„åªä¿ç•™shouldDeclare=trueçš„bean</span><br><span class="hljs-keyword">if</span> (declarable.shouldDeclare() &amp;&amp;<br>(adminsWithWhichToDeclare.isEmpty() || adminsWithWhichToDeclare.contains(<span class="hljs-built_in">this</span>))) &#123;<br>filtered.add(declarable);<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> filtered;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆå§‹åŒ–çš„éƒ¨åˆ†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Declares all the exchanges, queues and bindings in the enclosing application context, if any. It should be safe</span><br><span class="hljs-comment"> * (but unnecessary) to call this method more than once.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initialize</span><span class="hljs-params">()</span> &#123;<br><br>...<br><br><span class="hljs-keyword">final</span> Collection&lt;Exchange&gt; exchanges = filterDeclarables(contextExchanges);<br><span class="hljs-keyword">final</span> Collection&lt;Queue&gt; queues = filterDeclarables(contextQueues);<br>       <span class="hljs-comment">// è¿™é‡Œè¿‡æ»¤æ‰äº†shouldDeclare=falseçš„binding</span><br><span class="hljs-keyword">final</span> Collection&lt;Binding&gt; bindings = filterDeclarables(contextBindings);<br><br>...<br><br><span class="hljs-built_in">this</span>.rabbitTemplate.execute(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ChannelCallback</span>&lt;Object&gt;() &#123;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">doInRabbit</span><span class="hljs-params">(Channel channel)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>declareExchanges(channel, exchanges.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Exchange</span>[exchanges.size()]));<br>declareQueues(channel, queues.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Queue</span>[queues.size()]));<br>               <span class="hljs-comment">// å‘rabbitå£°æ˜bindingçš„éƒ¨åˆ†</span><br>declareBindings(channel, bindings.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Binding</span>[bindings.size()]));<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br>&#125;);<br><span class="hljs-built_in">this</span>.logger.debug(<span class="hljs-string">&quot;Declarations finished&quot;</span>);<br><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Spring</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RabbitMQ</tag>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Arch Linux å®‰è£…ç¬”è®°</title>
    <link href="/2022/04/19/arch-linux-setup-guide/"/>
    <url>/2022/04/19/arch-linux-setup-guide/</url>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://wiki.archlinux.org/">https://wiki.archlinux.org/</a></p></blockquote><h2 id="åŸºæœ¬ç³»ç»Ÿå®‰è£…"><a href="#åŸºæœ¬ç³»ç»Ÿå®‰è£…" class="headerlink" title="åŸºæœ¬ç³»ç»Ÿå®‰è£…"></a>åŸºæœ¬ç³»ç»Ÿå®‰è£…</h2><h3 id="å‰ç½®å‡†å¤‡"><a href="#å‰ç½®å‡†å¤‡" class="headerlink" title="å‰ç½®å‡†å¤‡"></a>å‰ç½®å‡†å¤‡</h3><ul><li>æ£€æŸ¥ç½‘ç»œ<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ip <span class="hljs-built_in">link</span><br></code></pre></td></tr></table></figure></li><li>æ›´æ–°ç³»ç»Ÿæ—¶é—´<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">timedatectl set-ntp <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="å‡†å¤‡ç£ç›˜"><a href="#å‡†å¤‡ç£ç›˜" class="headerlink" title="å‡†å¤‡ç£ç›˜"></a>å‡†å¤‡ç£ç›˜</h3></li><li>åˆ†åŒº<ul><li><p>æŸ¥çœ‹å½“å‰ç£ç›˜ä¿¡æ¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">fdisk -l<br></code></pre></td></tr></table></figure></li><li><p>è¿›å…¥åˆ†åŒº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">fdisk /dev/the_disk_to_be_partitionedï¼ˆè¦è¢«åˆ†åŒºçš„ç£ç›˜ï¼‰<br></code></pre></td></tr></table></figure><p>uefiå‚è€ƒï¼š</p><div class="table-wrapper"/><table><thead><tr><th>æŒ‚è½½ç‚¹</th><th>åˆ†åŒº</th><th>åˆ†åŒºç±»å‹</th><th>å¤§å°</th></tr></thead><tbody><tr><td>&#x2F;mnt&#x2F;boot&#x2F;EFI</td><td>&#x2F;dev&#x2F;efi_system_partition</td><td>EFIç³»ç»Ÿåˆ†åŒº</td><td>300M</td></tr><tr><td>[swap] <strong>ç§»åŠ¨è®¾å¤‡å»ºè®®ä¸è¦</strong></td><td>&#x2F;dev&#x2F;swap_partition&#x2F;</td><td>Linux swap (äº¤æ¢ç©ºé—´)</td><td>&gt; 512M (2G if physical ram &gt; 4G)</td></tr><tr><td>&#x2F;mnt</td><td>&#x2F;dev&#x2F;root_partition</td><td>Linux x86-64 æ ¹ç›®å½• (&#x2F;)</td><td>å‰©ä½™ç©ºé—´</td></tr></tbody></table></div></li><li><p><em>ç§»åŠ¨è®¾å¤‡çš„æƒ…å†µä¸‹:</em></p><div class="table-wrapper"/><table><thead><tr><th>æŒ‚è½½ç‚¹</th><th>åˆ†åŒº</th><th>åˆ†åŒºç±»å‹</th><th>å¤§å°</th></tr></thead><tbody><tr><td><em>none</em></td><td><em>none</em></td><td>BIOSå¯åŠ¨åˆ†åŒº</td><td>1M</td></tr><tr><td>&#x2F;mnt&#x2F;boot&#x2F;EFI</td><td>&#x2F;dev&#x2F;efi_system_partition</td><td>EFIç³»ç»Ÿåˆ†åŒº</td><td>300M</td></tr><tr><td>&#x2F;mnt</td><td>&#x2F;dev&#x2F;root_partition</td><td>Linux x86-64 æ ¹ç›®å½• (&#x2F;)</td><td>å‰©ä½™ç©ºé—´</td></tr></tbody></table></div></li><li><p>æ ¼å¼åŒ–åˆ†åŒº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">mkfs.ext4 /dev/root_partitionï¼ˆæ ¹åˆ†åŒºï¼‰<br><span class="hljs-comment"># ç§»åŠ¨è®¾å¤‡å…³é—­æ—¥å¿— mkfs.ext4 -O &quot;^has_journal&quot; /dev/root_partitionï¼ˆæ ¹åˆ†åŒºï¼‰</span><br>mkswap /dev/swap_partitionï¼ˆäº¤æ¢ç©ºé—´åˆ†åŒºï¼‰<br>mkfs.fat -F 32 /dev/efi_system_partition<br></code></pre></td></tr></table></figure></li><li><p>æŒ‚è½½åˆ†åŒº&amp;å¯ç”¨äº¤æ¢ç©ºé—´</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">mount /dev/root_partitionï¼ˆæ ¹åˆ†åŒºï¼‰ /mnt<br>mount /dev/efi_system_partition /mnt/boot/efi<br>swapon /dev/swap_partitionï¼ˆäº¤æ¢ç©ºé—´åˆ†åŒºï¼‰<br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="å®‰è£…ç³»ç»Ÿ"><a href="#å®‰è£…ç³»ç»Ÿ" class="headerlink" title="å®‰è£…ç³»ç»Ÿ"></a>å®‰è£…ç³»ç»Ÿ</h3><ul><li><p>è®¾ç½®cnæº</p><p>ç¬¬ä¸€ç§æ–¹æ³•</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br>curl <span class="hljs-string">&#x27;https://archlinux.org/mirrorlist/?country=CN&amp;prototcol=http&amp;protocol=https&amp;ip_version=4&#x27;</span> &gt; /etc/pacman.d/mirrorlist &amp;&amp; \<br><span class="hljs-built_in">echo</span> /etc/pacman.d/mirrorlist &amp;&amp; \<br>sudo vim /etc/pacman.d/mirrorlist &amp;&amp; \<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;pacman mirror list updated&#x27;</span><br></code></pre></td></tr></table></figure><p>  ç„¶åå°†<code>/etc/pacman.d/mirrorlist</code>ä¸­æ³¨é‡Šå»æ‰</p><p>ç¬¬äºŒç§æ–¹æ³•</p><p>åœ¨<code>/etc/pacman.d/mirrorlist</code>ä¸­æœç´¢CNï¼Œæ”¾åˆ°æœ€å‰é¢ï¼Œæ¨èaliyunçš„æº</p></li><li><p>å®‰è£…ç³»ç»Ÿ&amp;è½¯ä»¶åŒ…</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">pacstrap /mnt base base-devel linux linux-firmware vim vi sudo git<br><span class="hljs-comment"># ç§»åŠ¨è®¾å¤‡ å¯ä»¥ä½¿ç”¨åŸºäºBFQçš„ioè°ƒåº¦å†…æ ¸linux-zenï¼ŒæŠŠlinuxæ¢æˆlinux-zen</span><br></code></pre></td></tr></table></figure></li></ul><p>  <em>å‚è€ƒï¼š<a href="https://www.kernel.org/doc/html/latest/block/bfq-iosched.html">BFQ</a></em></p><h2 id="ç³»ç»Ÿé…ç½®"><a href="#ç³»ç»Ÿé…ç½®" class="headerlink" title="ç³»ç»Ÿé…ç½®"></a>ç³»ç»Ÿé…ç½®</h2><h3 id="ç³»ç»Ÿå¼•å¯¼"><a href="#ç³»ç»Ÿå¼•å¯¼" class="headerlink" title="ç³»ç»Ÿå¼•å¯¼"></a>ç³»ç»Ÿå¼•å¯¼</h3><ul><li>é…ç½®fstab  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab<br></code></pre></td></tr></table></figure></li><li>å®‰è£…grub  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">pacman -S efibootmgr grub<br><br><span class="hljs-comment"># uefi</span><br>grub-install --target=x86_64-efi --efi-directory=&#123;æŒ‚è½½ç‚¹,å¦‚/mnt/boot/EFI&#125; --bootloader-id=GRUB<br><br><span class="hljs-comment"># bios(éGPTåˆ†åŒºæ— éœ€å…¶ä»–ç©ºé—´ï¼Œä½†GPTåˆ†åŒºéœ€è¦æœ‰ä¸€å—1Mçš„BIOS bootåˆ†åŒº)</span><br>grub-install --target=i386-pc /dev/sdX<br></code></pre></td></tr></table></figure></li></ul><p>  <em>ç§»åŠ¨è®¾å¤‡çš„æƒ…å†µä¸‹</em></p><p>  å‡è®¾åˆ†åŒºé¡ºåºæ˜¯ï¼š<br>    - BIOS<br>    - EFI<br>    - root<br>  è¦å…ˆåœ¨è¿™å—è®¾å¤‡ä¸Šå†™å…¥å¼•å¯¼ä¿¡æ¯ï¼Œè¿è¡Œ<code>gdisk /dev/sdX</code></p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># gdisk /dev/sdX</span><br><br>Command (? <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>): r<br>Recovery/transformation <span class="hljs-built_in">command</span> (? <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>): h<br><br>WARNING! Hybrid MBRs are flaky and dangerous! If you decide not to use one,<br>just hit the Enter key at the below prompt and your MBR partition table will<br>be untouched.<br><br>Type from one to three GPT partition numbers, separated by spaces, to be added to the hybrid MBR, <span class="hljs-keyword">in</span> sequence: 1 2 3<br>Place EFI GPT (0xEE) partition first <span class="hljs-keyword">in</span> MBR (good <span class="hljs-keyword">for</span> GRUB)? (Y/N): N<br><br>Creating entry <span class="hljs-keyword">for</span> GPT partition <span class="hljs-comment">#1 (MBR partition #1)</span><br>Enter an MBR hex code (default EF): <br>Set the bootable flag? (Y/N): N<br><br>Creating entry <span class="hljs-keyword">for</span> GPT partition <span class="hljs-comment">#2 (MBR partition #2)</span><br>Enter an MBR hex code (default EF): <br>Set the bootable flag? (Y/N): N<br><br>Creating entry <span class="hljs-keyword">for</span> GPT partition <span class="hljs-comment">#3 (MBR partition #3)</span><br>Enter an MBR hex code (default 83): <br>Set the bootable flag? (Y/N): Y<br><br>Recovery/transformation <span class="hljs-built_in">command</span> (? <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>): x<br>Expert <span class="hljs-built_in">command</span> (? <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>): h<br>Expert <span class="hljs-built_in">command</span> (? <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>): w<br><br>Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING<br>PARTITIONS!!<br><br>Do you want to proceed? (Y/N): Y<br></code></pre></td></tr></table></figure><blockquote><p><strong>å¦‚æœä¸éœ€è¦å…¼å®¹ï¼Œä¸ç”¨åšè¿™ä¸€æ­¥ï¼Œæ··åˆåˆ†åŒºä¼šåœ¨è®¾å¤‡ä¸Šå­˜åœ¨ä¸¤ä¸ªåˆ†åŒºè¡¨ï¼Œç³»ç»Ÿè¯†åˆ«è¿™ä¸ªè®¾å¤‡åˆ†åŒºçš„æ—¶å€™å…·ä½“çš„è¡Œä¸ºå®Œå…¨ä¾èµ–äºç³»ç»Ÿçš„å®ç°ï¼Œéå¸¸ä¸ç¨³å®š</strong></p></blockquote><blockquote><p><strong>æ³¨æ„ï¼šå†™å®Œhybridä¹‹åï¼Œé»˜è®¤çš„windowsä¸­å°±åªè®¤MBRåˆ†åŒºï¼Œå‡è®¾åˆ†åŒºæŒ‰ä¸Šé¢çš„ä¾‹å­ï¼Œä¸”è¿˜æœ‰ä¸€ä¸ª4å·åˆ†åŒºï¼Œé‚£ä¹ˆç”±äºMBRçš„é™åˆ¶</strong><br><strong>åœ¨windowsä¸­ç¬¬å››ä¸ªåˆ†åŒºæ˜¯æ— æ³•æ­£ç¡®è¯†åˆ«æ–‡ä»¶ç³»ç»Ÿçš„ï¼Œå¦‚æœè¦ä½¿ç”¨ç¬¬å››ä¸ªåˆ†åŒºä¸”è¦é€šè¿‡MBRå¼•å¯¼ï¼Œé‚£ä¹ˆè¿™é‡Œå°±è¦åœ¨MBRå†™å…¥134åˆ†åŒº</strong><br><strong>ESPåˆ†åŒºå¯ä»¥ä¸ç”¨å†™åˆ°MBRé‡Œ</strong></p></blockquote>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">pacman -S efibootmgr grub amd-ucode intel-ucode<br><br><span class="hljs-comment"># uefi + MBR(BIOS)æ··åˆå¯åŠ¨</span><br>grub-install --target=x86_64-efi --efi-directory=&#123;æŒ‚è½½ç‚¹,å¦‚/mnt/boot/EFI&#125; --removable<br> --bootloader-id=GRUB --boot-directory=&#123;rootæŒ‚è½½ç‚¹,å¦‚/mnt&#125;/boot<br><br>grub-install --target=i386-pc --recheck --boot-directory=/DATA_MOUNTPOINT/boot /dev/sdX <span class="hljs-comment">#æ³¨æ„è¿™é‡Œæ˜¯æ•´ä¸ªè®¾å¤‡</span><br><br><span class="hljs-comment"># ä½œä¸ºä¿é™©</span><br>grub-install --target=i386-pc --recheck --boot-directory=/DATA_MOUNTPOINT/boot /dev/&#123;rootçš„é‚£ä¸ªåˆ†åŒº&#125;<br></code></pre></td></tr></table></figure><ul><li><p>åˆ‡æ¢åˆ°å·²ç»å®‰è£…çš„ç³»ç»Ÿ</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">arch-chroot /mnt<br></code></pre></td></tr></table></figure></li><li><p>é…ç½®grub.cfg</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">grub-mkconfig -o /boot/grub/grub.cfg<br></code></pre></td></tr></table></figure><h3 id="ç³»ç»Ÿåˆå§‹åŒ–è®¾ç½®"><a href="#ç³»ç»Ÿåˆå§‹åŒ–è®¾ç½®" class="headerlink" title="ç³»ç»Ÿåˆå§‹åŒ–è®¾ç½®"></a>ç³»ç»Ÿåˆå§‹åŒ–è®¾ç½®</h3></li><li><p>è®¾ç½®æ—¶åŒº</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ln</span> -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime<br>hwclock --systohc<br></code></pre></td></tr></table></figure></li><li><p>æœ¬åœ°åŒ–</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">locale-gen<br></code></pre></td></tr></table></figure></li></ul><p>  â€“ ç§»åŠ¨è®¾å¤‡æœ€å°åŒ–ç£ç›˜è®¿é—®,æŠŠæ—¥å¿—æ”¾åˆ°å†…å­˜<br>  ä¿®æ”¹<code>/etc/systemd/journald.conf.d/usbstick.conf</code><br>  å†™å…¥<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">[Journal]<br>Storage=volatile<br>RuntimeMaxUse=30M<br></code></pre></td></tr></table></figure></p><ul><li>initramfs<br>  å¦‚æœæ˜¯ç§»åŠ¨è®¾å¤‡ï¼Œå°†<code>/etc/mkinitcpio.conf</code>ä¸­<code>HOOKS</code>é‡Œé¢çš„<code>block</code>å’Œ<code>keyboard</code>æ”¾åˆ°<code>autodetect</code>å‰é¢ï¼Œç„¶å  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mkinitcpio -P<br></code></pre></td></tr></table></figure></li></ul><p>  åˆ›å»º<code>/etc/locale.conf</code>,è®¾ç½®<code>LANG=en_US.UTF-8</code></p><ul><li><p>hostname<br>  åˆ›å»º<code>/etc/hostname</code>,å†™å…¥ä¸»æœºå</p></li><li><p>rootå¯†ç </p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">passwd<br></code></pre></td></tr></table></figure></li><li><p>hosts<br>  å‘<code>/etc/hosts</code>å†™å…¥</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">127.0.0.1 localhost<br>::1 localhost<br>127.0.0.1 &#123;hostname&#125;<br></code></pre></td></tr></table></figure></li><li><p>å®‰è£…ç½‘ç»œå·¥å…·</p></li></ul><p>  *networkmanagerå·²ç»ä¸ä½¿ç”¨dhcpcd, å› æ­¤éœ€è¦å®‰è£…dhclient<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">pacman -S iw wpa_supplicant dialog dhcpcd dhclient netctl networkmanager network-manager-applet gnome-keyring<br><span class="hljs-comment"># è®¾ç½®ç½‘ç»œå¼€æœºå¯åŠ¨</span><br>systemctl <span class="hljs-built_in">enable</span> NetworkManager.service<br></code></pre></td></tr></table></figure></p><ul><li>æ–°å¢ç”¨æˆ·  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">useradd -m -G <span class="hljs-built_in">users</span>,audio,lp,optical,storage,video,wheel,power -s /bin/bash æ™®é€šç”¨æˆ·å<br>passwd æ™®é€šç”¨æˆ·å<br></code></pre></td></tr></table></figure>  è¿è¡Œ<code>visudo</code>, å»æ‰<code>%wheel ALL=(ALL) ALL</code>æ³¨é‡Š</li></ul><p><strong>åˆ°è¿™é‡ŒåŸºæœ¬å·²ç»å®Œæˆæœ€å°ç³»ç»Ÿçš„é…ç½®å’Œå®‰è£…ï¼Œåœ¨ç»§ç»­ä¹‹å‰ï¼Œæ”¹å¯åŠ¨é¡¹ç„¶åreboot</strong></p><h2 id="DE-x2F-WM-x2F-DM"><a href="#DE-x2F-WM-x2F-DM" class="headerlink" title="DE&#x2F;WM&#x2F;DM"></a>DE&#x2F;WM&#x2F;DM</h2><ul><li><p>å®‰è£…xorg</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pacman -S xorg xorg-xinit<br><span class="hljs-comment">## ç§»åŠ¨è®¾å¤‡è¦å®‰è£…</span><br><span class="hljs-comment"># xf86-input-synaptics æ”¯æŒè§¦æ§æ¿</span><br><span class="hljs-comment"># xf86-video-vesa, xf86-video-ati, xf86-video-intel, xf86-video-amdgpu, xf86-video-nouveau and xf86-video-fbdev. å¤§å¤šæ•°çš„å¼€æºæ˜¾å¡é©±åŠ¨</span><br><span class="hljs-comment">#  libeatmydata  å¯ä»¥ç¦ç”¨fsyncï¼Œæ¯”å¦‚å¯¹äºfirefoxï¼šeatmydata firefox</span><br></code></pre></td></tr></table></figure></li><li><p>å®‰è£…å­—ä½“</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pacman -S terminus-font <br></code></pre></td></tr></table></figure></li><li><p>å®‰è£…DE</p><ul><li>Mate<ul><li>å®‰è£…mate<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pacman -S mate mate-extra<br></code></pre></td></tr></table></figure></li><li>é…ç½®xinitrc<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> /etc/X11/xinit/xinitrc ~/.xinitrc<br></code></pre></td></tr></table></figure>æŠŠæœ€åçš„å¯åŠ¨æ¢æˆ<code>exec mate-session</code></li></ul></li><li>XFCE<ul><li>å®‰è£…xfce<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pacman -S xfce4 xfce4-goodies<br></code></pre></td></tr></table></figure></li><li>é…ç½®xinitrc<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> /etc/X11/xinit/xinitrc ~/.xinitrc<br></code></pre></td></tr></table></figure>æŠŠæœ€åçš„å¯åŠ¨æ¢æˆ<code>exec startxfce4</code></li></ul></li></ul></li><li><p>ä»…å®‰è£…WM</p><p><em>(ç•¥)</em></p></li><li><p>å®‰è£…DM</p><ul><li>lightdm<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pacman -S lightdm-gtk-greeter<br></code></pre></td></tr></table></figure></li></ul></li></ul><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="æ”¯æŒhyper-vå¢å¼ºæ¨¡å¼"><a href="#æ”¯æŒhyper-vå¢å¼ºæ¨¡å¼" class="headerlink" title="æ”¯æŒhyper-vå¢å¼ºæ¨¡å¼"></a>æ”¯æŒhyper-vå¢å¼ºæ¨¡å¼</h3>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://www.github.com/Microsoft/linux-vm-tools<br><span class="hljs-built_in">cd</span> linux-vm-tools/arch<br><span class="hljs-comment"># è¦å…ˆå¼€ä»£ç†</span><br>./make...<br>./install...<br></code></pre></td></tr></table></figure><p>ç„¶åè®°å¾—åœ¨winä¸­ç”¨ç®¡ç†å‘˜è®¾ç½®</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd"><span class="hljs-built_in">Set</span>-VM -VMName &lt;your_vm_name&gt;  -EnhancedSessionTransportType HvSocket<br></code></pre></td></tr></table></figure><p>  <strong>å¦‚æœæ— æ³•é€šè¿‡å¢å¼ºæ¨¡å¼è¿æ¥</strong></p><p>  <a href="https://wiki.archlinux.org/title/Xrdp#loginctl_or_systemctl_--user_not_working">arch wiki [loginctl or systemctl â€“user not working]</a></p><p>  Try commenting out all the references to <code>systemd-home</code> in <code>/etc/pam.d/system-auth</code>, see <a href="https://github.com/neutrinolabs/xrdp/issues/1684">github issue</a></p><h3 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">alias</span> s=<span class="hljs-string">&#x27;sudo&#x27;</span><br><span class="hljs-built_in">alias</span> <span class="hljs-built_in">ls</span>=<span class="hljs-string">&#x27;ls --color=auto&#x27;</span><br><span class="hljs-built_in">alias</span> la=<span class="hljs-string">&#x27;ls -a --color=auto&#x27;</span><br><span class="hljs-built_in">alias</span> ll=<span class="hljs-string">&#x27;ls -l --color=auto&#x27;</span><br><span class="hljs-built_in">alias</span> lla=<span class="hljs-string">&#x27;ls -l -a --color=auto&#x27;</span><br><span class="hljs-built_in">alias</span> pac=<span class="hljs-string">&#x27;pacman -S&#x27;</span><br><span class="hljs-built_in">alias</span> pacyu=<span class="hljs-string">&#x27;pacman -Syu&#x27;</span><br><span class="hljs-built_in">alias</span> spac=<span class="hljs-string">&#x27;sudo pacman -S&#x27;</span><br><span class="hljs-built_in">alias</span> spacyu=<span class="hljs-string">&#x27;sudo pacman -Syu&#x27;</span><br><span class="hljs-built_in">alias</span> v=<span class="hljs-string">&#x27;vim&#x27;</span><br><span class="hljs-built_in">alias</span> sv=<span class="hljs-string">&#x27;sudo vim&#x27;</span><br><br></code></pre></td></tr></table></figure><h3 id="rsyncå¤‡ä»½"><a href="#rsyncå¤‡ä»½" class="headerlink" title="rsyncå¤‡ä»½"></a>rsyncå¤‡ä»½</h3><ul><li>å®‰è£…rsync<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pacman -S rsync<br></code></pre></td></tr></table></figure></li><li>backup.sh<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;==&gt; start to backup... type device:&#x27;</span> &amp;&amp; \<br><span class="hljs-built_in">read</span> device &amp;&amp; \<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;==&gt; type mount dir:&#x27;</span> &amp;&amp; \<br><span class="hljs-built_in">read</span> mount_dir &amp;&amp; \<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;==&gt; umount $device...&#x27;</span>; \<br>umount <span class="hljs-variable">$device</span>;\<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;==&gt; umount /mnt/$mount_dir...&#x27;</span>; \<br>umount /mnt/<span class="hljs-variable">$mount_dir</span>; <br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;==&gt; remove /mnt/$mount_dir...&#x27;</span>; \<br><span class="hljs-built_in">rm</span> -rf /mnt/<span class="hljs-variable">$mount_dir</span> &amp;&amp; \<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;==&gt; create directory /mnt/$mount_dir...&#x27;</span>; \<br><span class="hljs-built_in">mkdir</span> /mnt/<span class="hljs-variable">$mount_dir</span>; \<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;==&gt; mount $device to /mnt/$mount_dir...&#x27;</span>; \<br>mount <span class="hljs-variable">$device</span> /mnt/<span class="hljs-variable">$mount_dir</span>; \<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;==&gt; create direcotry /mnt/$mount_dir/system_bakcup...&#x27;</span>; \<br><span class="hljs-built_in">mkdir</span> /mnt/<span class="hljs-variable">$mount_dir</span>/system_backup;<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;==&gt; start to sync files to /mnt/$mount_dir/system_backup...&#x27;</span>; \<br>rsync --archive --one-file-system --hard-links \<br>--acls --xattrs --sparse \<br>--human-readable --numeric-ids --delete --delete-excluded \<br>--itemize-changes --verbose --progress \<br>--exclude=<span class="hljs-string">&#x27;*~&#x27;</span> \<br>--exclude=<span class="hljs-string">&#x27;$device&#x27;</span> \<br>--exclude=<span class="hljs-string">&#x27;/mnt&#x27;</span> \<br>--exclude=<span class="hljs-string">&#x27;/dev&#x27;</span> \<br>--exclude=<span class="hljs-string">&#x27;/var/tmp&#x27;</span> \<br>--exclude=<span class="hljs-string">&#x27;/tmp&#x27;</span> \<br>/ /mnt/<span class="hljs-variable">$mount_dir</span>/system_backup &amp;&amp; \<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;==&gt; finished.&#x27;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="ä¸­æ–‡åŠå­—ä½“è®¾ç½®"><a href="#ä¸­æ–‡åŠå­—ä½“è®¾ç½®" class="headerlink" title="ä¸­æ–‡åŠå­—ä½“è®¾ç½®"></a>ä¸­æ–‡åŠå­—ä½“è®¾ç½®</h3><ul><li>è¯­è¨€é…ç½®<br>å»æ‰<code>/etc/locale.gen</code>ä¸­çš„<code>zh_CN.UTF-8 UTF-8</code>å’Œ<code>en_US.UTF-8 UTF-8</code>çš„æ³¨é‡Š</li></ul><p>æ ¹æ®éœ€è¦åœ¨<code>~/.xinitrc</code>æˆ–è€…<code>~/.bashrc</code>é…ç½®</p><p><strong>åœ¨<code>~/.xinitrc</code>ä¸­é…ç½®è¦æ³¨æ„åœ¨<code>exec xxx</code>ä¹‹å‰</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> LANG=zh_CN.UTF-8<br><span class="hljs-built_in">export</span> LANGUAGE=zh_CN:en_US<br></code></pre></td></tr></table></figure><ul><li>å­—ä½“é…ç½®<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pacman -S wqy-bitmapfont wqy-microhei noto-fonts noto-fonts-emoji<br></code></pre></td></tr></table></figure>è®¾ç½®<code>~/.config/fontconfig/fonts.conf</code><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">fontconfig</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&#x27;fonts.dtd&#x27;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">fontconfig</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- æ˜¾ç¤ºå™¨ä½¿ç”¨çš„åƒç´ æ’åˆ—æ–¹å¼ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;font&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;rgba&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">const</span>&gt;</span>rgb<span class="hljs-tag">&lt;/<span class="hljs-name">const</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- å­—ä½“å¾®è°ƒçš„ç¨‹åº¦, å¯é€‰ hintnone, hintslight (é»˜è®¤), hintmedium, hintfull. --&gt;</span><br>  <span class="hljs-comment">&lt;!-- æ›´é«˜çš„ hinting ç­‰çº§å¯ä½¿å­—ä½“æ›´é”åˆ©ï¼ŒåŒæ—¶ä¹Ÿä¼šæŸå¤±æ›´å¤šçš„ç»†èŠ‚ --&gt;</span><br>  <span class="hljs-comment">&lt;!-- å¦‚æœæ˜¾ç¤ºå™¨çš„ DPI é«˜å¾—ä¸åƒè¯ (&gt;=300), å¯å…³é—­ hinting, å­—ä½“ä¼šè‡ªç„¶å¯¹é½åƒç´  --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;font&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hintstyle&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">const</span>&gt;</span>hintslight<span class="hljs-tag">&lt;/<span class="hljs-name">const</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- æŠ—é”¯é½¿. é™¤éå±å¹•DPIå¥‡é«˜å¦åˆ™å»ºè®®å¼€å¯ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;font&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;antialias&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">bool</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br><br><span class="hljs-comment">&lt;!-- å…¨å±€é»˜è®¤å­—ä½“ã€€--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;prepend&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Terminus<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- å…¨å±€é»˜è®¤è‹±æ–‡å­—ä½“ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">compare</span>=<span class="hljs-string">&quot;contains&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;lang&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>en<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;prepend&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Terminus<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- å…¨å±€é»˜è®¤ä¸­æ–‡å­—ä½“ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">compare</span>=<span class="hljs-string">&quot;contains&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;lang&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>zh<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;prepend&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>WenQuanYi WenQuanYi Bitmap Song<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- é»˜è®¤æ— è¡¬çº¿å­—ä½“ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;pattern&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">qual</span>=<span class="hljs-string">&quot;any&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>sans-serif<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;prepend&quot;</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">&quot;same&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Terminus<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- é»˜è®¤è¡¬çº¿å­—ä½“ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;pattern&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">qual</span>=<span class="hljs-string">&quot;any&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>serif<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;prepend&quot;</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">&quot;same&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Terminus<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- é»˜è®¤ç­‰å®½å­—ä½“ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;pattern&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">qual</span>=<span class="hljs-string">&quot;any&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>monospace<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;prepend&quot;</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">&quot;same&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Terminus<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- å­—ä½“æ›¿æ¢ --&gt;</span><br>  <span class="hljs-comment">&lt;!--SimSun, Microsoft YaHei, SimHei -&gt; WenQuanYi Micro Hei --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;pattern&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>å®‹ä½“<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">&quot;strong&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>WenQuanYi WenQuanYi Bitmap Song<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>          <span class="hljs-comment">&lt;!-- &lt;string&gt;Noto Serif CJK SC&lt;/string&gt; --&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;pattern&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>SimSun<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">&quot;strong&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>WenQuanYi WenQuanYi Bitmap Song<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>          <span class="hljs-comment">&lt;!-- &lt;string&gt;Noto Serif CJK SC&lt;/string&gt; --&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;pattern&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">qual</span>=<span class="hljs-string">&quot;any&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>SimSun-18030<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">&quot;same&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>WenQuanYi WenQuanYi Bitmap Song<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>         <span class="hljs-comment">&lt;!-- &lt;string&gt;Noto Serif CJK SC&lt;/string&gt; --&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;pattern&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">qual</span>=<span class="hljs-string">&quot;any&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Microsoft YaHei<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">&quot;same&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>WenQuanYi WenQuanYi Bitmap Song<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;pattern&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">qual</span>=<span class="hljs-string">&quot;any&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>SimHei<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">&quot;same&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>WenQuanYi WenQuanYi Bitmap Song<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;pattern&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Times New Roman<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;append&quot;</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">&quot;strong&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>WenQuanYi WenQuanYi Bitmap Song<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;pattern&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Terminus<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;append&quot;</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">&quot;strong&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>WenQuanYi WenQuanYi Bitmap Song<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br><br><span class="hljs-comment">&lt;!-- å¤‡ç”¨å­—ä½“ä¼˜å…ˆé¡ºåº --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">alias</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>sans-serif<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">prefer</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Terminus<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>WenQuanYi WenQuanYi Bitmap Song<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Color Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK SC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK TC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK JP<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK KR<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">prefer</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">alias</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">alias</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>serif<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">prefer</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Terminus<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>WenQuanYi WenQuanYi Bitmap Song<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Color Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK SC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK TC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK JP<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK KR<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">prefer</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">alias</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">alias</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>monospace<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">prefer</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Terminus<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>WenQuanYi WenQuanYi Bitmap Song<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Color Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK SC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK TC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK JP<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK KR<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">prefer</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">alias</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">fontconfig</span>&gt;</span><br></code></pre></td></tr></table></figure>è®¾ç½®å­—ä½“åå¥½:<code>/etc/fonts/conf.d/64-language-selector-prefer.conf</code><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">fontconfig</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&#x27;fonts.dtd&#x27;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">fontconfig</span>&gt;</span>  <br><span class="hljs-tag">&lt;<span class="hljs-name">alias</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>sans-serif<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">prefer</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Terminus<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>WenQuanYi WenQuanYi Bitmap Song<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Color Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK SC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK TC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK JP<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK KR<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">prefer</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">alias</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">alias</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>serif<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">prefer</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Terminus<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>WenQuanYi WenQuanYi Bitmap Song<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Color Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK SC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK TC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK JP<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK KR<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">prefer</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">alias</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">alias</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>monospace<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">prefer</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Terminus<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>WenQuanYi WenQuanYi Bitmap Song<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Color Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK SC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK TC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK JP<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK KR<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">prefer</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">alias</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">fontconfig</span>&gt;</span><br><br><br></code></pre></td></tr></table></figure></li></ul><h3 id="å®‰è£…fcitx5"><a href="#å®‰è£…fcitx5" class="headerlink" title="å®‰è£…fcitx5"></a>å®‰è£…fcitx5</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pacman -S fcitx5-im fcitx5-chinese-addons fcitx5-mozc<br></code></pre></td></tr></table></figure><h3 id="xfceçš„å£°éŸ³"><a href="#xfceçš„å£°éŸ³" class="headerlink" title="xfceçš„å£°éŸ³"></a>xfceçš„å£°éŸ³</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pacman -S alsa-utils pulseaudio pulseaudio-alsa \<br> pavucontrol      <span class="hljs-comment">#ä¸xfce4 panelé‡Œé¢çš„æ’ä»¶é…åˆä½¿ç”¨,å¿…é¡»è¦æœ‰è¿™ä¸ªè¿›ç¨‹</span><br></code></pre></td></tr></table></figure><p>xfce4 panelè®¾ç½®é‡Œé¢æ·»åŠ ä¸€ä¸ªpulseaudio pluginçš„æ’ä»¶</p><p><code>alsamixer</code> F6é€‰æ‹©å£°å¡,ç„¶åæŠŠmmçš„Mé”®å»æ‰,ä¸Šä¸‹ç®­å¤´è°ƒèŠ‚,auto-mute disableäº†ä»¥å,loopback enable. rebooté‡å¯,è¿™æ—¶å€™xfce4çš„æ’ä»¶å°±å¯ä»¥è°ƒèŠ‚å£°éŸ³äº†</p><h3 id="å®‰è£…chrome"><a href="#å®‰è£…chrome" class="headerlink" title="å®‰è£…chrome"></a>å®‰è£…chrome</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#AUR åŠ©æ‰‹</span><br>git <span class="hljs-built_in">clone</span> https://aur.archlinux.org/yay-git.git<br><span class="hljs-built_in">cd</span> yay-git<br>makepkg -si<br><br><span class="hljs-comment">#yayä¸è¦ç”¨root</span><br>yay -S google-chrome<br><br><span class="hljs-comment">#å‡çº§</span><br>yay -Syu<br></code></pre></td></tr></table></figure><h3 id="å®‰è£…clash"><a href="#å®‰è£…clash" class="headerlink" title="å®‰è£…clash"></a>å®‰è£…clash</h3><p>çœ‹<a href="https://blog.linioi.com/posts/clash-on-arch/">è¿™</a><br>æˆ–è€…<a href="https://github.com/Fndroid/clash_for_windows_pkg/releases">class for windows</a></p><h3 id="æ”¯æŒntfs"><a href="#æ”¯æŒntfs" class="headerlink" title="æ”¯æŒntfs"></a>æ”¯æŒntfs</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pacman -S ntfs-3g<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>setup</tag>
      
      <tag>Arch Linux</tag>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Shellè„šæœ¬ç¬”è®°</title>
    <link href="/2022/03/19/shell-some-memos-for-shell-script/"/>
    <url>/2022/03/19/shell-some-memos-for-shell-script/</url>
    
    <content type="html"><![CDATA[<ul><li><p>æ¥å—ç”¨æˆ·è¾“å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">read</span> var<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;input value is <span class="hljs-variable">$var</span>&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>æˆåŠŸåæ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">rm</span> somefile &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;removed&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>å¤±è´¥åæ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">rm</span> filenotexists || <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;nothing removed&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>é‡å®šå‘è¾“å‡º</p><ul><li><p><code>1</code>ä»£è¡¨<code>stdout</code>, æ ‡å‡†è¾“å‡º</p></li><li><p><code>2</code>ä»£è¡¨<code>stderr</code>, æ ‡å‡†é”™è¯¯è¾“å‡º</p></li><li><p><code>&amp;</code>ä»£è¡¨â€æŒ‰ç…§ç›¸åŒæ–¹å¼è¾“å‡ºâ€</p></li><li><p><code>dev/null</code>æ˜¯nullæ–‡ä»¶ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œé»‘æ´â€è®¾å¤‡ï¼Œæ‰€æœ‰è¾“å…¥éƒ½ä¼šè¢«ä¸¢å¼ƒ</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;blabla&quot;</span> &gt; dest.file<br><br><span class="hljs-comment"># è¾“å‡ºæ‰€æœ‰è¾“å‡ºåˆ°æ–‡ä»¶</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;blabla&quot;</span> 1 &gt; dest.file<br><br><span class="hljs-comment"># åªè¾“å‡ºé”™è¯¯è¾“å‡ºåˆ°æ–‡ä»¶</span><br><span class="hljs-built_in">rm</span> filenotexists 2 &gt; err.log<br><br><span class="hljs-comment"># è¾“å‡ºæ‰€æœ‰è¾“å‡ºåˆ°æ–‡ä»¶</span><br><span class="hljs-built_in">rm</span> somefile 1 &gt; dest.file 2&gt;&amp;1<br><br><span class="hljs-comment"># è¾“å‡ºéé”™è¯¯è¾“å‡ºåˆ°æ–‡ä»¶</span><br><span class="hljs-built_in">rm</span> somefile 1 &gt; dest.file 2 &gt; dev/null<br><br><span class="hljs-comment"># åˆ›å»ºä¸¤æ¡ç®¡é“</span><br><span class="hljs-built_in">rm</span> somefile 1 &gt; <span class="hljs-built_in">log</span> 2 &gt; <span class="hljs-built_in">log</span><br><br><span class="hljs-comment"># 2çš„ç®¡é“ç»§æ‰¿äº1</span><br><span class="hljs-built_in">rm</span> somefile 1 &gt; <span class="hljs-built_in">log</span> 2&gt;&amp;1<br></code></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå›ºå®šå¤§å°çš„ç©ºæ–‡ä»¶</p><p>å½“<code>dev/zero</code>ä½œä¸ºè¾“å…¥æµçš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿæ— é™çš„0 (ä¸æ˜¯ASCIIçš„â€™0â€™)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># input file is /dev/zero</span><br><span class="hljs-comment"># output file is file</span><br><span class="hljs-comment"># write 10 times</span><br><span class="hljs-comment"># 1024 bytes every time</span><br><span class="hljs-comment"># so it creates a 10k blank file</span><br><span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/zero of=file count=10 bs=1024<br></code></pre></td></tr></table></figure></li><li><p>if else</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">a=10<br>b=20<br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$a</span> == <span class="hljs-variable">$b</span> ]<br><span class="hljs-keyword">then</span><br>   <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a is equal to b&quot;</span><br><span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$a</span> -gt <span class="hljs-variable">$b</span> ]<br><span class="hljs-keyword">then</span><br>   <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a greater than b&quot;</span><br><span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$a</span> -lt <span class="hljs-variable">$b</span> ]<br><span class="hljs-keyword">then</span><br>   <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a less than b&quot;</span><br><span class="hljs-keyword">else</span><br>   <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure></li><li><p>è¿½åŠ åˆ°æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">file1 &gt;&gt; file2<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;tails&quot;</span> &gt;&gt; file<br><span class="hljs-built_in">date</span> &gt;&gt; file<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>shell script</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é”™è¯¯çš„åŠ¨æ€ç±»åŠ è½½æ–¹å¼å¼•å‘çš„metaspaceå†…å­˜æ³„æ¼</title>
    <link href="/2022/03/17/jvm-metaspace-leakage-caused-by-loading-dynamic-class/"/>
    <url>/2022/03/17/jvm-metaspace-leakage-caused-by-loading-dynamic-class/</url>
    
    <content type="html"><![CDATA[<h2 id="ç°è±¡"><a href="#ç°è±¡" class="headerlink" title="ç°è±¡"></a>ç°è±¡</h2><p>é€šè¿‡<code>ClassLoader#defineClass</code>æ–¹æ³•é‡å¤å®šä¹‰æŒ‡å®š<code>name</code>çš„ç±», HotSpot JVMæœ€ç»ˆä¼šåœ¨metaspaceä¸­æŠ›å‡ºOOMã€‚</p><h2 id="ClassLoader-defineClassçš„è¡Œä¸º"><a href="#ClassLoader-defineClassçš„è¡Œä¸º" class="headerlink" title="ClassLoader#defineClassçš„è¡Œä¸º"></a><code>ClassLoader#defineClass</code>çš„è¡Œä¸º</h2><p><img src="/2022/03/17/jvm-metaspace-leakage-caused-by-loading-dynamic-class/0.png" alt="defineClass"></p><p><code>ClassLoader#defineClass</code>æ˜¯JVMæœ¬åœ°æ–¹æ³•, ä¸»è¦çš„æ‰§è¡Œæ­¥éª¤:</p><ol><li><p>è§£æclassæ–‡ä»¶å¹¶æ£€æŸ¥classæ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚</p><p><img src="/2022/03/17/jvm-metaspace-leakage-caused-by-loading-dynamic-class/1.png" alt="vm specification"></p></li><li><p>æ ¹æ®<code>name</code>æ£€æŸ¥<code>systemDictionary</code>ä¸­classå¯¹åº”çš„ç±»æ•°æ®Klass&#x2F;KlassHandleræ˜¯å¦å·²ç»åŠ è½½è¿‡ã€‚</p></li></ol><h2 id="HotSpot-VMè§£æclassçš„æ—¶å€™å®é™…è¡Œä¸º"><a href="#HotSpot-VMè§£æclassçš„æ—¶å€™å®é™…è¡Œä¸º" class="headerlink" title="HotSpot VMè§£æclassçš„æ—¶å€™å®é™…è¡Œä¸º"></a>HotSpot VMè§£æclassçš„æ—¶å€™å®é™…è¡Œä¸º</h2><p>åœ¨è§£æå’Œæ£€æŸ¥classæ ¼å¼è¿‡ç¨‹ä¸­, HotSpot VMåŒæ—¶ä¹Ÿåœ¨metaspaceä¸­äº§ç”Ÿäº†å¯¹åº”classæ–‡ä»¶çš„ç»“æ„æ•°æ® (class code, vtable, itable, etc.)ã€‚ æ‰€ä»¥å³ä½¿ä¼ å…¥çš„<code>name</code>å®Œå…¨ä¸€æ ·, ä¹Ÿä¼šåœ¨metaspaceä¸­ä¸æ–­äº§ç”Ÿâ€œé‡å¤â€çš„classæ•°æ®ã€‚</p><p><img src="/2022/03/17/jvm-metaspace-leakage-caused-by-loading-dynamic-class/2.png" alt="native define class"></p><p><img src="/2022/03/17/jvm-metaspace-leakage-caused-by-loading-dynamic-class/3.png" alt="find klass in dict"></p><p><img src="/2022/03/17/jvm-metaspace-leakage-caused-by-loading-dynamic-class/4.png" alt="check if class already defined"></p><p>é€‰æ‹©åœ¨è§£æçš„è¿‡ç¨‹ä¸­ä¿ç•™å®Œæ•´çš„classæ•°æ®ï¼ˆè¿™é‡Œâ€œå®Œæ•´â€æŒ‡çš„æ˜¯ç›¸å¯¹ä¸è§£æä¸€éƒ¨åˆ†ä¹‹åä¸¢å¼ƒä¸€éƒ¨åˆ†çš„åšæ³•ï¼‰ï¼Œé™¤äº†ä¸è¿™ä¹ˆåšä¼šå¢åŠ ä»£ç å¤æ‚åº¦ã€å¢åŠ classæ•°æ®è§£æçš„æ¬¡æ•°ã€äº§ç”Ÿæ›´å¤šçš„å†…å­˜ç¢ç‰‡ä¹‹å¤–ï¼Œå¦ä¸€ä¸ªè€ƒè™‘æ˜¯æ­£ç¡®ä¸”è§„èŒƒçš„åŠ¨æ€ç±»åŠ è½½æ–¹å¼åº”è¯¥æ˜¯é€šè¿‡<code>ClassLoader#loadClass()</code>æ¥è¿›è¡Œï¼Œè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨nativeæ–¹æ³•ï¼Œå› ä¸ºç›´æ¥è°ƒç”¨nativeæ–¹æ³•å¹¶ä¸ä¼šå¾—åˆ°ä¸ä¸€æ ·çš„ç»“æœã€‚</p><p><img src="/2022/03/17/jvm-metaspace-leakage-caused-by-loading-dynamic-class/5.png" alt="loadClass in java"></p><h2 id="metaspaceä¸­Classæ•°æ®çš„GCæ—¶æœº"><a href="#metaspaceä¸­Classæ•°æ®çš„GCæ—¶æœº" class="headerlink" title="metaspaceä¸­Classæ•°æ®çš„GCæ—¶æœº"></a>metaspaceä¸­Classæ•°æ®çš„GCæ—¶æœº</h2><p>å®é™…ä¸Šæ²¡æœ‰ç‰¹å®šé’ˆå¯¹metaspaceçš„GCè¡Œä¸ºï¼ŒGCæ€»æ˜¯åœ¨å †ä¸­å·¥ä½œã€‚ä½†å½“å †ä¸­åŒ…å«metaspaceçš„classæ•°æ®æŒ‡é’ˆçš„classå¯¹è±¡è¢«æ‰§è¡Œå›æ”¶æ—¶ï¼Œclassæ•°æ®å ç”¨çš„ç©ºé—´ä¹Ÿä¼šè¢«åŒæ—¶é‡Šæ”¾ã€‚</p><p><img src="/2022/03/17/jvm-metaspace-leakage-caused-by-loading-dynamic-class/6.png" alt="metaspace &#39;GC&#39;"></p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>JVM</tag>
      
      <tag>JVM Memory</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Frida-il2cpp-bridge script for fate/go</title>
    <link href="/2022/03/17/fgo-frida-il2cpp-bridge/"/>
    <url>/2022/03/17/fgo-frida-il2cpp-bridge/</url>
    
    <content type="html"><![CDATA[<p>hack script for fgo based on <a href="https://github.com/frida/frida">frida</a> and <a href="https://github.com/vfsfitvnm/frida-il2cpp-bridge">frida-il2cpp-bridge</a> </p><h3 id="Supports"><a href="#Supports" class="headerlink" title="Supports"></a>Supports</h3><ul><li><p>bilibili fate go v2.36.0</p></li><li><p>aniplex fate go v2.49.0</p><p><em>fate go in other channels&#x2F;platforms&#x2F;versions may be functional but itâ€™s not tested</em></p></li></ul><h3 id="Steps"><a href="#Steps" class="headerlink" title="Steps"></a>Steps</h3><h4 id="For-Android"><a href="#For-Android" class="headerlink" title="For Android"></a>For Android</h4><p>*<em>Android 10 or 11 is recommended, among testing in android 9 sometimes game may crash</em></p><ul><li><p>Install nodeJs for NPM</p></li><li><p>Install frida and frida-tools with <code> npm install frida &amp;&amp; npm install frida-tools</code></p></li><li><p>Download latest frida-server from <a href="https://github.com/frida/frida/releases">https://github.com/frida/frida/releases</a></p></li><li><p>Start rooted device, rettach with <code> adb root</code></p></li><li><p>Install game apk</p></li><li><p>Copy <em><strong>frida-server</strong></em> file to device directory such as <em><strong>&#x2F;data&#x2F;local&#x2F;tmp</strong></em></p></li><li><p>Run <code>adb shell</code> to connect to device</p></li><li><p>Change <em><strong>frida-server</strong></em> file permission with <code>chmod 777 &#123;directory&#125;/frida-server</code></p></li><li><p>Navigate to directory and run server with <code>./frida-server</code></p></li></ul><h4 id="For-IOS"><a href="#For-IOS" class="headerlink" title="For IOS"></a>For IOS</h4><ul><li>TODO</li></ul><h4 id="Run-script"><a href="#Run-script" class="headerlink" title="Run script"></a>Run script</h4><ul><li><p>See comments in <em><strong>fgo_hack_script.ts</strong></em>, and change codes according to the <em>fgo</em> version</p><ul><li>there is some tiny diffrences between <em>bili fatego</em> and <em>aniplex fatego</em></li></ul></li><li><p>Build with <code>./build_aniplex.sh</code> or <code>./build_bili.sh</code></p></li><li><p>Run with <code>./run.sh com.bilibili.fgo</code> or <code>./run.sh com.aniplex.fategrandorder</code></p><ul><li>you could now see some logs (if codes like <code>console.log(...)</code> is uncommented) when starting battle</li></ul></li><li><p>Have fun.</p></li></ul><h3 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h3><p><img src="/images/0.jpg" alt="in battle"></p><h4 id="active"><a href="#active" class="headerlink" title="active"></a>active</h4><ol><li><p>Increase playerâ€™s servant hp (by 500,000)</p></li><li><p>Set all skills lv to 10 (both servantâ€™s and masterâ€™s)</p></li><li><p>Change all skills charge turn down (to 1)</p></li><li><p>Try to disable codestage anti-cheat engine (notice that there is <strong>NO WAY</strong> to cheat safely cause anyway the battle data will be sent to game server)</p></li></ol><h4 id="inactive"><a href="#inactive" class="headerlink" title="inactive"></a>inactive</h4><ol><li><p>Never die (reset hp every time servant dies)</p></li><li><p>Increase attack &amp; defence np rate</p></li><li><p>Increase attack star rate</p></li></ol><h3 id="Issues"><a href="#Issues" class="headerlink" title="Issues"></a>Issues</h3><ul><li><p>Could not ran with X64-based simulator such as MuMu (tested) at this time (<a href="https://github.com/vfsfitvnm/frida-il2cpp-bridge">frida-il2cpp-bridge</a> version 0.7.9)</p></li><li><p>Features in <a href="#inactive">inactive</a> may invoked too frequently that may cause some leakage</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>Amateur Exp.</category>
      
    </categories>
    
    
    <tags>
      
      <tag>wallhack</tag>
      
      <tag>injection</tag>
      
      <tag>reverse engineering</tag>
      
      <tag>fgo</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
