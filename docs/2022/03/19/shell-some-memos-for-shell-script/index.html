<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <link rel="alternate icon" type="image/png" href="/img/favicon.png">
    <title>Attt&#39;s ブログ | Papers</title>
    
<link rel="stylesheet" href="/css/reset.css">

    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/css/markdown.css">

    
<link rel="stylesheet" href="/css/fonts.css">

<meta name="generator" content="Hexo 6.1.0"></head>
    <body>
        <div class="paper">
            <div class="paper-main">
                
                    <div class="post-header">
    <a class="logo" href="/">Attt&#39;s ブログ</a>
    <a class="go-home" href="/">
        <svg width="8" height="14" viewBox="0 0 8 14">
            <path d="M7 1L1 7l6 6" stroke="#000" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </a>
</div>
                
                <div class="post-main">

    
        <div class="post-main-title">
            &lt;Shell&gt; Some memos for shell script
        </div>
        <div class="post-meta">
            2022-03-19
        </div>
    

    <div class="post-md">
        <ul>
<li><p>accept user input</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">read</span> var
<span class="token builtin class-name">echo</span> <span class="token string">"input value is <span class="token variable">$var</span>"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li><p>do after pre-command succeed</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">rm</span> somefile <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token string">"removed"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>do after pre-command failed</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">rm</span> filenotexists <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">"nothing removed"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>redirect output</p>
<ul>
<li><p><code>1</code> means <code>stdout</code>, standard output</p>
</li>
<li><p><code>2</code> means <code>stderr</code>, standard error output</p>
</li>
<li><p><code>&amp;</code> means “as the same way”</p>
</li>
<li><p><code>dev/null</code> is a null file like a “blak hole”, anything written to it is discard</p>
</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"blabla"</span> <span class="token operator">></span> dest.file

<span class="token comment"># complete</span>
<span class="token builtin class-name">echo</span> <span class="token string">"blabla"</span> <span class="token number">1</span> <span class="token operator">></span> dest.file

<span class="token comment"># error output to dest.file</span>
<span class="token function">rm</span> filenotexists <span class="token number">2</span> <span class="token operator">></span> err.log

<span class="token comment"># all output to dest.file</span>
<span class="token function">rm</span> somefile <span class="token number">1</span> <span class="token operator">></span> dest.file <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span>

<span class="token comment"># only stdout</span>
<span class="token function">rm</span> somefile <span class="token number">1</span> <span class="token operator">></span> dest.file <span class="token number">2</span> <span class="token operator">></span> dev/null

<span class="token comment"># create 2 pipes, overwrites each other</span>
<span class="token function">rm</span> somefile <span class="token number">1</span> <span class="token operator">></span> log <span class="token number">2</span> <span class="token operator">></span> log

<span class="token comment"># 2 extends 1's pipe, works fine</span>
<span class="token function">rm</span> somefile <span class="token number">1</span> <span class="token operator">></span> log <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>create blank file with certain size</p>
<p><code>dev/zero</code> as an input stream provides endless 0s (not ASCII ‘0’)</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># input file is /dev/zero</span>
<span class="token comment"># output file is file</span>
<span class="token comment"># write 10 times</span>
<span class="token comment"># 1024 bytes every time</span>
<span class="token comment"># so it creates a 10k blank file</span>
<span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/zero <span class="token assign-left variable">of</span><span class="token operator">=</span>file <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">10</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span><span class="token number">1024</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>if else</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">10</span>
<span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token number">20</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$a</span> <span class="token operator">==</span> <span class="token variable">$b</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
   <span class="token builtin class-name">echo</span> <span class="token string">"a is equal to b"</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$a</span> -gt <span class="token variable">$b</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
   <span class="token builtin class-name">echo</span> <span class="token string">"a greater than b"</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$a</span> -lt <span class="token variable">$b</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
   <span class="token builtin class-name">echo</span> <span class="token string">"a less than b"</span>
<span class="token keyword">else</span>
   <span class="token builtin class-name">echo</span> <span class="token string">""</span>
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>append to file</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">file1 <span class="token operator">>></span> file2
<span class="token builtin class-name">echo</span> <span class="token string">"tails"</span> <span class="token operator">>></span> <span class="token function">file</span>
<span class="token function">date</span> <span class="token operator">>></span> <span class="token function">file</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
</ul>

    </div>

</div>
                <div class="footer">
    <span>Copyright © 2022 Attt&#39;s ブログ</span>
    <span>Theme Designed By <a target="_blank" href="https://zheli.design/one-paper">這Li</a>, Modified by <a target="_blank" href="https://github.com/attt">Attt</a></span>
</div>


<link rel="stylesheet" href="/css/a11y-dark.min.css">


<script src="/js/highlight.min.js"></script>


<script src="/js/highlightjs-line-numbers.js"></script>


<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>

            </div>
        </div>
    </body>
</html>